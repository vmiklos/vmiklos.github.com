<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.5.3" />
<meta name="description" content="xmlsec improvements in LibreOffice 5.4 - Miklos' blog" />
<meta name="keywords" content="vmiklos, libereoffice, swig, git, python, hacking, bitlbee" />
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/blog/index.rss" />
<link rel="stylesheet" href="/blog/xhtml11.css" type="text/css" />
<link rel="stylesheet" href="/blog/xhtml11-quirks.css" type="text/css" />
<link rel="stylesheet" href="/blog/layout.css" type="text/css" />
<title>xmlsec improvements in LibreOffice 5.4</title>
<!-- google analytics start -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24726997-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- google analytics end -->
</head>
<body>
<div id="layout-banner-box">
<div id="layout-banner">
  <div id="layout-title">vmiklos.hu</div>
  <div id="layout-description">shameless self-promoting website</div>
</div>
</div>
<div id="layout-menu-box">
<div id="layout-menu">
  <div>&#187;<a href="/">Root</a></div>
  <div>&#187;<a href="/blog/">Rejourn root</a></div>
  <div>&#187;<a href="http://planet.documentfoundation.org/">LibreOffice Community Blogs</a></div>
  <div>
    Search:<br/>
    <form action="http://www.google.com/cse" id="cse-search-box" target="_blank">
    <input type="hidden" name="cx" value="007336731492173318056:bik8fqvatno"/><input type="hidden" name="ie" value="UTF-8"/><input type="text" name="q" size="15"/><br/>
    <input type="submit" name="sa" value="&#187;"/></form>
  </div>
</div>

</div>
<div id="layout-content-box">
<div id="layout-content">
<div id="header">
	<h1>xmlsec improvements in LibreOffice 5.4</h1>
</div>
<div id="preamble">
<div class="sectionbody">

<!-- Single entry -->
<div class="verseblock">
<div class="verseblock-content">Posted <span class="timeago" title="2017-05-17T09:09:59Z">Wednesday, 17 May 2017</span> by Miklos<br />
    Tags:
    <a href="tags/en.html">en</a>
    <a href="tags/libreoffice.html">libreoffice</a>
<div class="nav-previous"><a href="/blog/pdf-image-rountrip.html" rel="prev"><span class="meta-nav">&larr;</span> Improved rountrip of PDF images in LibreOffice</a></div>
</div>
</div>

<!-- Body -->
<div class="paragraph"><p>This post summarizes the plumbing work around ODF/OOXML digital signatures
that I did on LibreOffice master after the 5.3 branch-off up to now. The big
thing is the
<a href="https://gerrit.libreoffice.org/gitweb?p=core.git;a=commit;h=ad319fdfcaaa6092ea1ff76935e088c5122e0d2e">integration</a>
of the libxmlsec 1.2.24 release. Among other things, this contains 2 larger
changes that I contributed upstream triggered by the needs of LibreOffice:</p></div>
<div class="ulist"><ul>
<li>
<p>
The <a href="/blog/xmlsec-nss-ecdsa.html">ECDSA-SHA256 feature</a> is something I
  already mentioned, but I did not bother to backport the SHA1 and the SHA256
  part, so those now arrived to LibreOffice as well.
</p>
</li>
<li>
<p>
xmlsec&#8217;s <code>XMLSEC_KEYINFO_FLAGS_X509DATA_DONT_VERIFY_CERTS</code> flag (while
  verifying signatures) was there, but its behavior was not clear (neither
  for <a href="https://github.com/lsh123/xmlsec/pull/78">nss</a> nor for
  <a href="https://github.com/lsh123/xmlsec/pull/79">mscrypto</a>). I&#8217;ve changed it to be in
  sync what you have in other commands to avoid certificate validation (like
  <code>wget -k</code> or <code>curl -k</code>), which means as a next step there will be one less
  xmlsec patch in LibreOffice that prevents us from using xmlsec from the system
  on Linux. (Adding tests also detected that in the nss case not using that flag
  also didn&#8217;t do verification by accident, this is now fixed as well.)
</p>
</li>
</ul></div>
<div class="paragraph"><p>After the release I also noticed that creating signatures on Windows
<a href="https://www.aleksey.com/pipermail/xmlsec/2017/010143.html">was broken</a>, this is
now fixed on xmlsec master and also backported to LibreOffice.</p></div>
<div class="paragraph"><p>All this is available in LibreOffice master, towards 5.4.</p></div>


<script src="https://apis.google.com/js/plusone.js"></script>
<g:plus action="share"></g:plus>

<!-- Disqus comments -->
<h1 id="comment-header">Comments</h1>
<div id="disqus_thread"></div>
<script type="text/javascript" src="//vmiklos.disqus.com/embed.js">
	var disqus_developer = 1;
</script>
<noscript>
  <p><a href="http://disqus.com/?ref_noscript=vmiklos">View the discussion thread.</a></p>
</noscript>

</div>
</div>
</div>
</div>
</body>
</html>
