<!DOCTYPE html>
<html lang="en">

<head>
  <!-- ## for client-side less
  <link rel="stylesheet/less" type="text/css" href="https://vmiklos.hu/blog/theme/css/style.less">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js" type="text/javascript"></script>
  -->
  <link rel="stylesheet" type="text/css" href="https://vmiklos.hu/blog/theme/css/style.css">
  <link rel="stylesheet" type="text/css" href="https://vmiklos.hu/blog/theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=PT+Sans|PT+Serif|PT+Mono">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Miklos Vajna">
  <meta name="description" content="Posts and writings by Miklos Vajna">

  <link href="https://vmiklos.hu/blog/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="What is Miklos hacking RSS" />

<link href="https://vmiklos.hu/blog/feeds/hacking.rss.xml" type="application/rss+xml" rel="alternate" title="What is Miklos hacking hacking Category RSS" />

  <title>
    What is Miklos hacking
&ndash; Category: hacking  </title>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24726997-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>

<body>
  <aside>
    <div id="user_meta">
      <h2><a href="https://vmiklos.hu/blog">What is Miklos hacking</a></h2>
      <p></p>
      <ul>
        <li><a href="/" target="_blank">Root</a></li>
        <li><a href="https://planet.documentfoundation.org/" target="_blank">LibreOffice Blogs</a></li>
      </ul>
    </div>
  </aside>

  <main>
    <header>
      <p>
      <a href="https://vmiklos.hu/blog">Index</a> &brvbar; <a href="https://vmiklos.hu/blog/archives.html">Archives</a>
      &brvbar; <a href="https://vmiklos.hu/blog/feeds/all.rss.xml">RSS</a>
&gt; Category: hacking
&brvbar; <a href="https://vmiklos.hu/blog/feeds/hacking.rss.xml">RSS</a>
      </p>
    </header>

<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/solving-kernel-bugs-without-bisecting.html">Solving kernel bugs without bisecting</a></h1>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<p>So after I upgraded to Linux-2.6.33 my wifi card stopped working after resume. I way lazy and I had no time to <a href="http://en.wikipedia.org/wiki/Bisection_method">bisect</a> it, so I just ignored the problem for a while, then today I looked up the lkml thread and bingo, an <a href="http://groups.google.com/group/linux.kernel/msg/a3b71c903e3c7bc9">easy workaround</a> is there. ;)</p><p>\o/</p>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/recent-hacks-upgrade.html">Recent hacks, upgrade</a></h1>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<p><ul>
  <li>ooo-build: <a href="http://cgit.freedesktop.org/ooo-build/ooo-build/commit/?id=5692b89ec72d22e43580c54a01131c7b4cc5c5c6">two</a> <a href="http://cgit.freedesktop.org/ooo-build/ooo-build/commit/?id=d29f754f0dd89399c1e885071c3712ea6fe500fa">fixes</a> for the configure script (perl, rsync)</li>
  <li>the irssi script that renames facebook "u$bigint" nicks to real names based on whois info stripped chars with accents. a <a href="http://frugalware.org/~vmiklos/patches/bitlbee-facebook-accents.patch">oneliner patch</a> makes it possible not to drop chars with accents, just convert them to ascii.</li>
<li>The dazuko m8r <a href="http://www.mail-archive.com/dazuko-devel@nongnu.org/msg00469.html">merged</a> my Linux-2.6.33 patch. \o/</li>
</ul></p><p>The rest of this entry is not about programming in fact - I upgraded a machine at work from Frugalware-1.1 to 1.2 and I though it may worth noting a few interesting facts:</p><p><ul>
  <li>The attitude of <a href="https://bugs.kde.org/show_bug.cgi?id=167558">this bug</a> is like the famous <a href="http://sourceware.org/bugzilla/show_bug.cgi?id=4980">glibc one</a>. In short: kde3 supported having the same wallpaper on two screens by automatically splitting it up - now looks like kde4 does not. I ended up splitting the wall up using GIMP as well. :P</li>
  <li>kookaa is <a href="http://techbase.kde.org/Projects/Kooka#KDE4_Porting">not really ported</a>
 yet to kde4 so I needed to switch to kolourpaint.</li>
  <li>While upgrading cups, I hit <a href="https://answers.launchpad.net/hplip/+question/89196">this bug</a> as well. (Notice how Ubuntu calls bugs "answers". ;) )</li>
</ul></p>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/running-the-right-command-at-the-right-time.html">Running the right command at the right time</a></h1>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<code>
$ while :; do date -R; sleep 1; done
Sun, 28 Mar 2010 01:59:59 +0100
Sun, 28 Mar 2010 03:00:00 +0200
^C
</code>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/edited-skype-messages-in-bitlbee.html">Edited skype messages in BitlBee</a></h1>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
A user reported on #bitlbee that in case someone edits an already sent message using the Skype GUI client, BitlBee does not report the change. This used to work for about 2,5 years ago, but now I checked and true, it was broken. When I fixed it I realised that it would be nice to prefix the updated message with something to be aware that it's an edited message, not a new one. The result is pushed out to the git repo and a <a href="http://vmiklos.hu/project/bitlbee-skype/shot/011-edit-prefix.png">screenshot</a> is available as well. ;)
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/samba-gentoo.html">samba, gentoo</a></h1>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<p>Sorry, I'm continuing the story of uninteresting challenges I had in the last two days. Or if they look like interesting ones, please continue. ;)</p><p>Two days ago we (at work) had to repair a samba installation after a 3.0.x -> 3.2.x upgrade. There were 3 problems:</p><p><ul>
  <li>the firewall config had to be updated, to allow incoming tcp connections on port 445</li>
  <li>somehow smbd was listening on ipv6 only, just listing all network interfaces in the config was enough to make it listen on ipv4 as well</li>
  <li>for another strange reason it no longer accepted hostnames on its whitelist, using ip addresses directly did the trick</li>
</ul></p><p>The other story from yesterday was fix up the firewall configuration at a small office. The problem was that till now they had a PPPoE connection and the firewall used NAT to share the internet access to the desktop machines, but now they switched to a radio-based access, they got a new modem which did not support PPPoE. Of course in short I just got the usual "the internet does not work!" bugreport. ;)</p><p>I must note that I'm not a sysadmin at this office, I just stepped in as the local sysadmin was a SPoF in the system and he (temporally?) disappeared and they asked me beause of "the hours is burning" effect. :)</p><p>So all I had to do is to alter the server configuration, which was running Gentoo. I never touched such a machine before, and it's configuration is (of course, since I'm used to our netconfig) weird, but at least the off-line documentation was enough. So after RTFM, I just had to turn off pppoe, set the dns and the default gateway to the address of the new router and all was fine. One notable interesting fact was that there was no damn vi on the server. Given that emerge takes a lot of time, I had to suck with mcedit. :P</p><p>Conclusion: yet another example why offline documentation is important, even in case nowadays "there is internet everywhere". ;)</p>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/gcalsync-3-vmware-xrandr.html">gcalsync #3, vmware, xrandr</a></h1>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<p>First, I wasted a few more hours with my never-ending "sync events form my Nokia S40 phone to Google Calendar" project. The result: it's not a daemon, it checks if the last sync was more than a day ago, if it can ping google.com, and if both, but it can't reach the phone via bluetooth, then it raises a kde4 notification, and it also notifies me when (and how) the sync was done, so that I switch bluetooth off on the phone after the sync. As usual, available <a href="http://git.frugalware.org/repos/vmexam/bash/gcalsync">here</a>.</p><p>Second, I managed to fix two annoying bugs when installing Frugalware under VMware: dhcpcd did not update /etc/resolv.conf in the installer properly, now that I changed from dhcpcd to busybox's udhcpc, it seems to be fine. (And udhcpc still works fine in qemu as well.). The other vmware-related improvement is that the newport xorg driver somehow locked up the whole virtual machine, now it's moved to extra, so xconfig does not freeze the VM on a default install.</p><p>Third, today finally I managed to figure out how to enable the external output on my netbook, using the openchrome driver. It's just about a single line in xorg.conf:</p><p><pre>
Option     "ActiveDevice"               "LCD,CRT"
</pre></p><p>This won't do more than just cloning the output, but it's far enough for me, who just uses the external output for presentation only.</p><p>(There is a binary driver which locks up the whole machine about 5-8 times a day, which has a bit better external video support, but stability is far more important for me, and the openchrome driver _is_ stable.)</p><p>Partly related, when I connected the external output to a projector, I had to set the screen resolution to 1024x768, and later back to 1280x800. 5 years earlier you had to edit xorg.conf and restart X to do this, now you can do this with xrandr:</p><p><pre>
$ xrandr --output default --mode 1024x768
</pre></p><p>and then to switch back:</p><p><pre>
$ xrandr --output default --mode 1280x800
</pre></p><p>OK, enough entries for today. :)</p>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/memory-upgrade-to-3g.html">Memory upgrade to 3G</a></h1>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<p>So my netbook had 1G of ram so far and I was happy with it. Then I started to play with virtual machines and it turned out that the bottleneck of it is the small memory I have. So I just bought a 2G ram module, and at this point things started to be weird. Given that the system booted up and <em>almost</em> everything worked properly, I did not really had an idea. I thought it's a SW problem, so I did a clean Frugalware install on a separate partition as well, and there bash segfaulted in konsole as well sometimes. This ringed a bell, memtest!</p><p>After about 15 mins, memtest found numerous errors, then I rode back to the shop where I bought it and I asked for an other module. The interesting points were:</p><p><ul>
  <li>Actually the good ram was cheaper than the bad one they gave me the first time.</li>
  <li>When I inserted the 2G module, the original 1G ram wasn't anymore used as the 0-1G range, but it shown up as 2G-3G.</li>
</ul></p><p>Now I hope next time I have to increase my ram amount, x86_64 will be mainstream so that I won't have to suck again with a 'custom' architecture. ;)</p>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/sparse-checkout-example-in-git-1-7.html">Sparse checkout example in git 1.7.0</a></h1>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<p>Sparse checkout is now part of git-1.7.0. See <a href="http://www.kernel.org/pub/software/scm/git/docs/git-read-tree.html#_sparse_checkout">here</a> on what it is in general. Basically something what svn already knew for years and git did not. And of course git now does it better, since this way it's possible to checkout multiple sub-directories, not just a single one, what svn allows.</p><p>Here is a short example:</p><p><pre>
$ git clone ~/git/git
$ cd git
$ ls|wc -l
361
$ git config core.sparsecheckout true
$ echo ppc/ > .git/info/sparse-checkout
$ echo perl/ >> .git/info/sparse-checkout
$ git read-tree -m -u HEAD
$ ls
perl/  ppc/
</pre></p><p>Enjoy! :)</p><p>Update: see the comments, as it has been pointed out the "And of course git now does it better, since this way it's possible to checkout multiple sub-directories, not just a single one, what svn allows." sentence is incorrect; but of course having a similar feature in a distributed VCS is still an improvement. ;)</p>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/pptp-client-howto-on-linux-on-console.html">pptp client howto on linux on console</a></h1>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<p>So I saw a few howtos on how to set up ms pptp client on linux, but they're mostly about how to click on networkmanager or other guis, so basically they hide the real detail, IOW what config files are actually used.</p><p>First install the necessary packages:</p><p><code>
# pacman-g2 -S ppp pptp
</code></p><p>Here is what I have under /etc/ppp:</p><p><code>
# cat chap-secrets
# Secrets for authentication using CHAP
# client        server  secret                  IP addresses
$user           PPTP    $secret                 *
</code></p><p><code>
# cat options
lock
</code></p><p><code>
# cat options.pptp
lock
noauth
nobsdcomp
nodeflate
</code></p><p><code>
# cat peers/$network
pty "/usr/sbin/pptp $server --nolaunchpppd"
name "$user"
file /etc/ppp/options.pptp
remotename PPTP
require-mppe-128
refuse-eap
ipparam $network
</code></p><p>And to bring up ppp0:</p><p><code>
# pon $network debug dump logfd 2 nodetach
</code></p><p>If it works fine, you can just use:</p><p><code>
# pon $network
</code></p><p>(Obviously replace $user, $secret, $server and $network with real values.)</p><p>One thing I did not figure out is how to configure it to set the default gateway as well. Right now I use the debug mode, then in the output I see the remote address, finally:</p><p><code>
# route add default gw $remoteaddr
</code></p><p>Other than that, it works fine - without any damn gui! :)</p>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/darcs-import-on-repo-or-cz.html">darcs import on repo.or.cz</a></h1>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<p>I've contributed a patch to repo.or.cz to allow darcs imports, but and I recently got a reply for it from the maintainer. So we worked together a bit more and now the patches <a href="http://repo.or.cz/w/girocco.git?a=search&amp;st=author&amp;s=vmiklos">are in</a>, repo.or.cz just imported the source of <a href="http://repo.or.cz/w/darcsweb.git">darcsweb</a>.</p><p>I also created a test project and tested that incremental imports work properly as well. \o/</p><p>NB: It uses my darcs-fast-export tool, that's why I started to work on this. ;)</p>
</div>
</div>

  </div>
</article>

<footer>
<div id="paginator">
<a href="https://vmiklos.hu/blog/category/hacking4.html" class="button_accent">&larr; Older Posts</a>

<a href="https://vmiklos.hu/blog/category/hacking2.html" class="button_accent">Newer Posts &rarr;</a>
</div>
</footer>

    <div id="ending_message">
      <p>&copy; Miklos Vajna. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>. Theme by Giulio Fidente on <a href="https://github.com/gfidente/pelican-svbhack" target="_blank">github</a>. </p>
    </div>
  </main>
</body>
</html>