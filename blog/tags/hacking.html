<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.5.3" />
<meta name="description" content="What is Miklos hacking - Tags: hacking - Miklos' blog" />
<meta name="keywords" content="vmiklos, libereoffice, swig, git, python, hacking, bitlbee" />
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://vmiklos.hu/blog/index.rss" />
<link rel="stylesheet" href="/blog/xhtml11.css" type="text/css" />
<link rel="stylesheet" href="/blog/xhtml11-quirks.css" type="text/css" />
<link rel="stylesheet" href="/blog/layout.css" type="text/css" />
<title>What is Miklos hacking - Tags: hacking</title>
<!-- google analytics start -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24726997-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- google analytics end -->
</head>
<body>
<div id="layout-banner-box">
<div id="layout-banner">
  <div id="layout-title">vmiklos.hu</div>
  <div id="layout-description">shameless self-promoting website</div>
</div>
</div>
<div id="layout-menu-box">
<div id="layout-menu">
  <div>&#187;<a href="/">Root</a></div>
  <div>&#187;<a href="/blog/">Rejourn root</a></div>
  <div>&#187;<a href="http://planet.documentfoundation.org/">LibreOffice Community Blogs</a></div>
  <div>
    Search:<br/>
    <form action="http://www.google.com/cse" id="cse-search-box" target="_blank">
    <input type="hidden" name="cx" value="007336731492173318056:bik8fqvatno"/><input type="hidden" name="ie" value="UTF-8"/><input type="text" name="q" size="15"/><br/>
    <input type="submit" name="sa" value="&#187;"/></form>
  </div>
</div>


</div>
<div id="layout-content-box">
<div id="layout-content">
<div id="header">
	<h1>What is Miklos hacking - Tags: hacking</h1>
</div>
<div id="preamble">
<div class="sectionbody">




<!-- Listing -->
<div class="ulist"><ul>
<li><p>Saturday, 29 November 2014<br /><a href="/blog/libvisio-setup.html">Document Liberation Project hacking experience</a>
(<a href="/blog/libvisio-setup.html#disqus_thread">Comments</a>)
</p><p><div class="paragraph"><p>As someone who usually hacks on LibreOffice, external import filters produced
by the Document Liberation Project cut both ways: they are great, as they deal
with obscure formats and we get them for free, OTOH hacking such code is more
complex than the usual LO code. I recently contributed a few patches to
<a href="http://cgit.freedesktop.org/libreoffice/libvisio/commit/?id=2060d364bc0f7df97b864bf01fc5a27da12061c3">libvisio</a>
and
<a href="http://sourceforge.net/p/libwpd/libodfgen/ci/fb43d79e12ce132fc127cc0481ff5a6bdbcd1afe/">libodfgen</a>,
but before I was able to do actual code changes, I had to set up a number of
repositories and configure them to talk to each other&#8201;&#8212;&#8201;this post describes one
possible setup that suited my needs.</p></div>
<div class="sect1">
<h2 id="_building_blocks">Building blocks</h2>
<div class="sectionbody">
<div class="paragraph"><p>DLP&#8217;s central project is librevenge and everything builds on top of that,
either by calling it or called by it. In case the task is to turn VSDX files
into ODG ones, it looks like this:</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<a class="image" href="https://lh3.googleusercontent.com/-cxQ9QnWmyAo/VHoyKdHXSAI/AAAAAAAAFAY/Rqqr8xPorNM/s0/">
<img src="https://lh3.googleusercontent.com/-cxQ9QnWmyAo/VHoyKdHXSAI/AAAAAAAAFAY/Rqqr8xPorNM/s400/" alt="https://lh3.googleusercontent.com/-cxQ9QnWmyAo/VHoyKdHXSAI/AAAAAAAAFAY/Rqqr8xPorNM/s400/" />
</a>
</div>
</div>
<div class="paragraph"><p>libvisio can build a librevenge document model from Visio files (more on the
various librevenge-based libraries
<a href="http://davetardon.wordpress.com/2014/05/06/writing-import-libraries-with-librevenge-part-i-getting-started/">here</a>),
libodfgen can generate ODF output from such document models (one other
possibility would be e.g.
<a href="http://sourceforge.net/projects/libepubgen/">libepubgen</a>), and the
writerperfect module provides kind of a controller for the remaining modules,
e.g. for our purpose, a vsd2odg binary.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_alternatives_considered">Alternatives considered</h2>
<div class="sectionbody">
<div class="paragraph"><p>One possibility is to build LibreOffice, use <code>--with-system-libvisio</code> and
similar switches, then clone the repos, install them system-wide (possibly
with your modifications), and then you can test your changes just with
building the various libs, without changing your LO build (more
<a href="http://fridrich.blogspot.hu/2012/01/fosdem-2012-how-to-make-best-of-it-and.html">here</a>).
The drawback is that this way you pollute your system with unstable versions
of those libs.</p></div>
<div class="paragraph"><p>An other possibility is to build LibreOffice as usual, and then use the
<a href="https://wiki.documentfoundation.org/Development/Patching_External_Libraries">external
libraries patching mechanism</a> to hack on the code. The drawback is that you
have to work without git on the code, and also you can only work with a
released version.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_the_pkg_config_approach">The pkg-config approach</h2>
<div class="sectionbody">
<div class="paragraph"><p>So here is what I did to avoid the above mentioned drawbacks: all DLP projects
use pkg-config to find the required libraries, so you can configure them in a
way that allows building as a user, avoid installing them at all, and still
execute vsd2odg using the libs with your changes. Here is how to do it:</p></div>
<div class="ulist"><ul>
<li>
<p>
librevenge:
</p>
</li>
</ul></div>
<div class="paragraph"><p><code>git clone git://git.code.sf.net/p/libwpd/librevenge</code><br />
<code>cd librevenge</code><br />
<code>./autogen.sh</code><br />
<code>./configure --enable-debug</code><br />
<code>make</code></p></div>
<div class="ulist"><ul>
<li>
<p>
libvisio:
</p>
</li>
</ul></div>
<div class="paragraph"><p><code>git clone git://gerrit.libreoffice.org/libvisio</code><br />
<code>cd libvisio</code><br />
<code>./autogen.sh</code><br />
<code>./configure REVENGE_CFLAGS="-I/home/vmiklos/git/libreoffice/librevenge/inc" REVENGE_LIBS="-L/home/vmiklos/git/libreoffice/librevenge/src/lib/.libs/ -lrevenge-0.0" REVENGE_GENERATORS_CFLAGS="-I/home/vmiklos/git/libreoffice/librevenge/inc" REVENGE_GENERATORS_LIBS="-L/home/vmiklos/git/libreoffice/librevenge/src/lib/.libs/ -lrevenge-generators-0.0" REVENGE_STREAM_CFLAGS="-I/home/vmiklos/git/libreoffice/librevenge/inc" REVENGE_STREAM_LIBS="-L/home/vmiklos/git/libreoffice/librevenge/src/lib/.libs/ -lrevenge-stream-0.0" --enable-debug</code><br />
<code>make</code></p></div>
<div class="ulist"><ul>
<li>
<p>
libodfgen:
</p>
</li>
</ul></div>
<div class="paragraph"><p><code>git clone git://git.code.sf.net/p/libwpd/libodfgen</code><br />
<code>cd libodfgen</code><br />
<code>./autogen.sh</code><br />
<code>./configure REVENGE_CFLAGS="-I/home/vmiklos/git/libreoffice/librevenge/inc" REVENGE_LIBS="-L/home/vmiklos/git/libreoffice/librevenge/src/lib/.libs/ -lrevenge-0.0" REVENGE_STREAM_CFLAGS="-I/home/vmiklos/git/libreoffice/librevenge/inc" REVENGE_STREAM_LIBS="-L/home/vmiklos/git/libreoffice/librevenge/src/lib/.libs/ -lrevenge-stream-0.0" --enable-debug</code><br />
<code>make</code></p></div>
<div class="ulist"><ul>
<li>
<p>
writerperfect:
</p>
</li>
</ul></div>
<div class="paragraph"><p><code>git clone git://git.code.sf.net/p/libwpd/writerperfect</code><br />
<code>cd writerperfect</code><br />
<code>./autogen.sh</code><br />
<code>./configure REVENGE_CFLAGS="-I/home/vmiklos/git/libreoffice/librevenge/inc" REVENGE_LIBS="-L/home/vmiklos/git/libreoffice/librevenge/src/lib/.libs/ -lrevenge-0.0" REVENGE_STREAM_CFLAGS="-I/home/vmiklos/git/libreoffice/librevenge/inc" REVENGE_STREAM_LIBS="-L/home/vmiklos/git/libreoffice/librevenge/src/lib/.libs/ -lrevenge-stream-0.0" ODFGEN_CFLAGS="-I/home/vmiklos/git/libreoffice/libodfgen/inc" ODFGEN_LIBS="-L/home/vmiklos/git/libreoffice/libodfgen/src/.libs -lodfgen-0.1 -lrevenge-0.0 -lrevenge-stream-0.0" VISIO_CFLAGS="-I/home/vmiklos/git/libreoffice/libvisio/inc" VISIO_LIBS="-L/home/vmiklos/git/libreoffice/libvisio/src/lib/.libs -lvisio-0.1 -lrevenge-0.0" --enable-debug --with-libvisio</code><br /></p></div>
<div class="paragraph"><p>Of course, replace <code>/home/vmiklos/git/libreoffice/</code> with any other directory
you like, just be consistent. ;-)</p></div>
<div class="paragraph"><p>Now you can hack on any of these libraries, you just need to build your
changes, and then vsd2odg will produce a flat ODG that you can quickly test
with any ODF processor, like LibreOffice. One remaining trick (in case you&#8217;re
not an autotools expert) is that vsd2odg is a libtool shell script, not a
binary. If you still want to run the underlying binary in gdb, here is how you
can do that:</p></div>
<div class="paragraph"><p><code>libtool --mode=execute gdb --args vsd2odg /home/vmiklos/git/libreoffice/test.vsdx</code></p></div>
<div class="paragraph"><p>In case the above considered two alternatives are not sufficient for your
purposes, then I hope you find this setup useful. ;-)</p></div>
</div>
</div>
</p><hr/></li>
<li><p>Sunday, 30 December 2012<br /><a href="/blog/recent-contributions-2012.html">Recent contributions</a>
(<a href="/blog/recent-contributions-2012.html#disqus_thread">Comments</a>)
</p><p><div class="paragraph"><p>Here are a few contributions I made recently:</p></div>
<div class="ulist"><ul>
<li>
<p>
Git: <a href="http://git.kernel.org/?p=git/git.git;a=commit;h=5ed75e2a3fb30f93fea7772e481ec6091e9a2c5f">cherry-pick: don&#8217;t forget -s on failure</a>
</p>
</li>
<li>
<p>
openSUSE / mutt package: <a href="https://build.opensuse.org/request/show/134918">add back lost sidebar color patch</a>
</p>
</li>
<li>
<p>
irker-cia-proxy: <a href="https://github.com/nenolod/irker-cia-proxy/commit/60a7f36a4285eeff21533549a6361b3a3e1ab796">make it possible to read input from stdin</a>, <a href="https://github.com/nenolod/irker-cia-proxy/commit/7ca987f7deae17f8a7170e0b0f292dc1f1aebbeb">add support for branch-specific templates</a>
</p>
</li>
<li>
<p>
BitlBee: <a href="http://code.bitlbee.org/lh/bitlbee/revision/960">skype: make it not hang with &gt;=2.2.0.35</a>
</p>
</li>
</ul></div>
</p><hr/></li>
<li><p>Monday, 11 June 2012<br /><a href="/blog/exif-date-sort.html">Sorting photos by date using exif date info</a>
(<a href="/blog/exif-date-sort.html#disqus_thread">Comments</a>)
</p><p><div class="paragraph"><p>For a family event I received photos from about 6 persons, and wanted to view
all of them, sorted by date. The problem was that the timestamps of the files
were sometimes incorrect, and also in all but one cases the exif timestamp was
incorrect as well (but at least that was consistently incorrect, e.g. all
behind of time by 20 mins, etc.)</p></div>
<div class="paragraph"><p>So first I searched for a photo where a clock is shown, then matched photos by
different authors showing the same action to know the time delta of each
camera. The rest can be scripted: just read the exif info, apply the necessary
time correction based on the camera model, and touch the file with the correct
date. Then any image viewer can show the photos, sorted by date.</p></div>
<div class="paragraph"><p>Here is the script I came up with:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">for</span></span> i <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> <span style="color: #990000">*.</span>jpg
<span style="font-weight: bold"><span style="color: #0000FF">do</span></span>
    <span style="font-style: italic"><span style="color: #9A1900"># 2012:01:01 01:01:01 -&gt; 2012-01-01 01:01:01</span></span>
    <span style="color: #009900">date</span><span style="color: #990000">=</span><span style="color: #009900">$(</span>exiv2 <span style="color: #009900">$i</span> <span style="color: #990000">|</span>grep timestamp<span style="color: #990000">|</span>sed <span style="color: #FF0000">'s/.* : //'</span><span style="color: #990000">|</span>sed <span style="color: #FF0000">'s/^</span><span style="color: #CC33CC">\(</span><span style="color: #FF0000">[0-9][0-9][0-9][0-9]</span><span style="color: #CC33CC">\)</span><span style="color: #FF0000">:</span><span style="color: #CC33CC">\(</span><span style="color: #FF0000">[0-9][0-9]</span><span style="color: #CC33CC">\)</span><span style="color: #FF0000">:</span><span style="color: #CC33CC">\(</span><span style="color: #FF0000">[0-9][0-9]</span><span style="color: #CC33CC">\)</span><span style="color: #FF0000">/</span><span style="color: #CC33CC">\1</span><span style="color: #FF0000">-</span><span style="color: #CC33CC">\2</span><span style="color: #FF0000">-</span><span style="color: #CC33CC">\3</span><span style="color: #FF0000">/'</span><span style="color: #990000">)</span>
    <span style="font-style: italic"><span style="color: #9A1900"># date string -&gt; epoch</span></span>
    <span style="color: #009900">unix</span><span style="color: #990000">=</span><span style="color: #009900">$(</span>date --date<span style="color: #990000">=</span><span style="color: #FF0000">"$date"</span> <span style="color: #990000">+%</span>s<span style="color: #990000">)</span>

    <span style="color: #009900">model</span><span style="color: #990000">=</span><span style="color: #009900">$(</span>exiv2 <span style="color: #009900">$i</span> <span style="color: #990000">|</span>grep model<span style="color: #990000">|</span>sed <span style="color: #FF0000">'s/.*: //'</span><span style="color: #990000">)</span>

    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">[</span> <span style="color: #FF0000">"$model"</span> <span style="color: #990000">==</span> <span style="color: #FF0000">"NIKON D40"</span> <span style="color: #990000">];</span> <span style="font-weight: bold"><span style="color: #0000FF">then</span></span>
        <span style="color: #009900">unix</span><span style="color: #990000">=</span><span style="color: #009900">$(($unix-1320))</span> <span style="font-style: italic"><span style="color: #9A1900"># Alice</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
        <span style="color: #009900">unix</span><span style="color: #990000">=</span><span style="color: #009900">$(($unix+3600))</span> <span style="font-style: italic"><span style="color: #9A1900"># Bob</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">fi</span></span>

    <span style="font-style: italic"><span style="color: #9A1900"># epoch -&gt; date string</span></span>
    <span style="color: #009900">date</span><span style="color: #990000">=</span><span style="color: #009900">$(</span>python -c <span style="color: #FF0000">"import time; print time.strftime('%Y-%m-%d %H:%M:%S', time.localtime($unix))"</span><span style="color: #990000">)</span>
    <span style="font-style: italic"><span style="color: #9A1900"># profit!</span></span>
    touch --date<span style="color: #990000">=</span><span style="color: #FF0000">"$date"</span> <span style="color: #009900">$i</span>
<span style="font-weight: bold"><span style="color: #0000FF">done</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># write back the timestamps to the exif info (thx boobaa)</span></span>
jhead -dsft <span style="color: #990000">*.</span>jpg</tt></pre></div></div>
<div class="paragraph"><p>And additionally if you don&#8217;t want to mess up the settings of the image viewer, you can use:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>c=0; for i in $(ls -lhtr *.jpg|sed 's/.* //'); do c=$((c+1)); cp -a $i new/$(printf "%03d" $c).jpg; done</code></pre>
</div></div>
<div class="paragraph"><p>to order filenames based on the file timestamp.</p></div>
</p><hr/></li>
<li><p>Sunday, 18 December 2011<br /><a href="/blog/recent-contributions.html">Recent contributions</a>
(<a href="/blog/recent-contributions.html#disqus_thread">Comments</a>)
</p><p><div class="ulist"><ul>
<li>
<p>
BitlBee: a patch for skyped got <a href="http://code.bitlbee.org/lh/bitlbee/revision/848">merged</a>, helping to avoid the cryptic openssl error messages when the certificate is missing.
</p>
</li>
<li>
<p>
openSUSE: the mutt package now <a href="https://build.opensuse.org/request/show/93695">contains</a> one more patch from Frugalware&#8217;s mutt-ng package, which means my mutt config can be used unmodified (no more unknown config settings)
</p>
</li>
<li>
<p>
jBPM and bpm-console: these were part of my <a href="https://github.com/vmiklos/msc-thesis/downloads">MSc thesis</a>, github branches <a href="https://github.com/vmiklos/jbpm/tree/5.1.x-thesis">are</a> <a href="https://github.com/vmiklos/bpm-console/tree/thesis">available</a>, upstreaming is <a href="https://github.com/droolsjbpm/jbpm/pull/43">in progress</a> (on IRC they confirmed that they are interested in the feature, at least)
</p>
</li>
</ul></div>
</p><hr/></li>
<li><p>Monday, 28 November 2011<br /><a href="/blog/patience-please.html">Patience, please!</a>
(<a href="/blog/patience-please.html#disqus_thread">Comments</a>)
</p><p><div class="paragraph"><p>So Lennart already had
<a href="http://0pointer.de/blog/projects/hinter-den-kulissen.html">great slides</a> about
what is the preferred attitude when you&#8217;re hacking Free Software (don&#8217;t expect
gratefulness &amp;&amp; be grateful), but recently there was such a great example, I
wanted to mention it. :)</p></div>
<div class="paragraph"><p>So I saw there is a new etckeeper release and I checked its changelog,
<a href="http://joey.kitenet.net/code/etckeeper/#code-etckeeper-news-version-0.58.default">mentioning
me</a>. What the hell? I didn&#8217;t contribute anything to that project in the past 3
years! It turned out it was a patch that was considered "too new" at that time,
but now got merged. ;) Remember, if you contribute, usually integration takes
much less time, so no need to whine about it.</p></div>
</p><hr/></li>
<li><p>Thursday, 24 November 2011<br /><a href="/blog/gammu2gcontacts.html">From gammu to Google Contacts</a>
(<a href="/blog/gammu2gcontacts.html#disqus_thread">Comments</a>)
</p><p><div class="paragraph"><p>One typical migration people do when changing phones is migration of contacts
and calendar items. In case of mine, this is about migrating data from an S40
phone to Google apps, where every smartphone can sync from.</p></div>
<div class="paragraph"><p>Migrating calendar items is easy: gammu can save the data from the phone to a
<tt>.ics</tt> file and Google Calendar can just import that.  The situation is a bit
harder for the phonebook, as Google Contacts would take a <tt>.csv</tt>, while gammu
as its own ini-like format for storing this data.</p></div>
<div class="paragraph"><p>I already found <a href="http://dblaci.hu/wammu2csv.pl">a script</a> doing something
similar, but the result was unusable. ;) Given that the whole task is not that
complex, I decided to write my own converter, available
<a href="https://github.com/vmiklos/vmexam/blob/master/gammu/gammu2gcontacts">here</a>.</p></div>
</p><hr/></li>
<li><p>Monday, 21 November 2011<br /><a href="/blog/gmane-scm-reply.html">Replying to SCM commits using Gmane</a>
(<a href="/blog/gmane-scm-reply.html#disqus_thread">Comments</a>)
</p><p><div class="paragraph"><p>SCM commit mailing lists are handy in case you want to comment others' commits
in an email. OTOH they are problematic, as they generate a lot of mails, and in
case I subscribe to the list, usually I don&#8217;t read those commits at all. (In
case you have time to read them, that&#8217;s a different use case.)</p></div>
<div class="paragraph"><p>So here is an example how to reply properly&#8201;&#8212;&#8201;without having to subscribe.</p></div>
<div class="ulist"><ul>
<li>
<p>
<a href="http://search.gmane.org/search.php?group=gmane.comp.documentfoundation.libreoffice.scm&amp;query=b863767bd1ddc2af18900fa1df0cd61ef2fa6edb">search</a>
  for the commit ID you want to comment (here b863767bd1ddc2af18900fa1df0cd61ef2fa6edb)
</p>
</li>
<li>
<p>
extract the article ID associated to the push from the link (here 1643)
</p>
</li>
<li>
<p>
<a href="http://download.gmane.org/gmane.comp.documentfoundation.libreoffice.scm/1643/1644">download</a>
  the article in mbox format, so you can reply to it from mutt (or your other
favorite MUA).
</p>
</li>
</ul></div>
</p><hr/></li>
<li><p>Wednesday, 05 January 2011<br /><a href="/blog/systemctl-pager.html">systemctl now supports auto-paging</a>
(<a href="/blog/systemctl-pager.html#disqus_thread">Comments</a>)
</p><p><div class="paragraph"><p>If you use systemd, you know <tt>systemctl</tt>. That&#8217;s the command that
controls systemd: you can use it to start, stop or list (and so on)
services. Now in case you use list, there is a lot of output, probably
it won&#8217;t fit your screen. git already invented auto-paging, which means
it&#8217;ll feed its output to a pager if the output is more than a screen,
for example when using <tt>git log</tt>. With my
<a href="http://cgit.freedesktop.org/systemd/commit/?id=0736af98c6fae9c7d31e3dd17589421b7e883ef5">recent
commit</a> this now the case with systemctl as well. :)</p></div>
</p><hr/></li>
<li><p>Tuesday, 28 December 2010<br /><a href="/blog/csp.html">CSP</a>
(<a href="/blog/csp.html#disqus_thread">Comments</a>)
</p><p><div class="paragraph"><p>CSP, as in Constraint satisfaction problem. A while back I wrote a
custom sudoku solver <a href="http://vmiklos.hu/file/sudoku.erl">in Erlang</a>, and
now I hit something similar. Of course, since then I learned that there
are nice CSP engines, so this time I did not try to write my own. :)</p></div>
<div class="paragraph"><p>First, I checked out
<a href="http://codespeak.net/svn/user/niemeyer/constraint/trunk/">python-constraint</a>,
and then I sticked with it, as it fulfilled my needs.</p></div>
<div class="paragraph"><p>So, the problem. Here is a Christmas tree:</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="/pic/csp.t.png" alt="/pic/csp.t.png" />
</div>
</div>
<div class="paragraph"><p>The tree has 4 chains, each one contains 7 items. A few ones already has
a number. The exercise: number the empty items with numbers between 1
and 7 so that:</p></div>
<div class="ulist"><ul>
<li>
<p>
Each chain contains the numbers 1..7 exactly once.
</p>
</li>
<li>
<p>
All the horizontal and diagonal lines cannot contain the same number
  twice.
</p>
</li>
</ul></div>
<div class="paragraph"><p>A possible solution is <a href="http://vmiklos.hu/file/csp.py">here</a>. If you get
less or more than one solution, you did something wrong. :) (I&#8217;m not
pasting here the output of the script to leave some exercise for the
readers. ;) )</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">As an experiment this time I draw the image using TikZ. Based on
<a href="http://stackoverflow.com/questions/2701902/standalone-diagrams-with-tikz">these
ideas</a> I converted <a href="http://vmiklos.hu/pic/csp.tex">the source</a> to PNG
using <a href="http://git.frugalware.org/repos/vmexam/convert/tikz2png">tikz2png</a>.</td>
</tr></table>
</div>
</p><hr/></li>
<li><p>Sunday, 26 December 2010<br /><a href="/blog/pcal.html">pcal</a>
(<a href="/blog/pcal.html#disqus_thread">Comments</a>)
</p><p><div class="paragraph"><p>I wanted to create some calendar present for Christmas in the family
with pictures and Hungarian year / month order, national holidays, etc.</p></div>
<div class="paragraph"><p>After looking at a few solutions,
<a href="http://pcal.sourceforge.net/pcal-help.html">pcal</a> seemed to be the best
choice.</p></div>
<div class="paragraph"><p>There are 3 key points here:</p></div>
<div class="ulist"><ul>
<li>
<p>
The order of the year / month can be changed only in build-time. If
  your locale has "year month" and not "month year" order, then you need
  <a href="https://github.com/vmiklos/vmexam/blob/master/pcal/pcal-4.11.0-order.patch">this patch</a>.
</p>
</li>
<li>
<p>
You need some config for each locale,
  <a href="https://github.com/vmiklos/vmexam/blob/master/pcal/calendar_hu.txt">here is mine</a>, containing
  the Hungarian national holidays.
</p>
</li>
<li>
<p>
Finally you need a script
  <a href="https://github.com/vmiklos/vmexam/blob/master/pcal/build-from-scratch.sh">like this</a> to put in
  the pictures.
</p>
</li>
</ul></div>
<div class="paragraph"><p>The result fully localized, free software, contains my custom images and
support custom marks for days using a quite flexible syntax.</p></div>
<div class="paragraph"><p>(Let me know if you know some other project where you can set the
year/month order runtime and the result can be still generated from a
script, ie. it&#8217;s not some LibreOffice or similar template. ;) )</p></div>
</p><hr/></li>
</ul></div>
<a href="/blog/archive.html">more &raquo;</a>
<script type="text/javascript">
var disqus_shortname = 'vmiklos';
(function () {
 var s = document.createElement('script'); s.async = true;
 s.src = 'http://disqus.com/forums/vmiklos/count.js';
 (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>

</div>
</div>
</div>
</div>
</body>
</html>
