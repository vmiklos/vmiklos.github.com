<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.5.3" />
<meta name="description" content="What is Miklos hacking - Tags: en - Miklos' blog" />
<meta name="keywords" content="vmiklos, libereoffice, swig, git, python, hacking, bitlbee" />
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://vmiklos.hu/blog/index.rss" />
<link rel="stylesheet" href="/blog/xhtml11.css" type="text/css" />
<link rel="stylesheet" href="/blog/xhtml11-quirks.css" type="text/css" />
<link rel="stylesheet" href="/blog/layout.css" type="text/css" />
<title>What is Miklos hacking - Tags: en</title>
<!-- google analytics start -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24726997-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- google analytics end -->
</head>
<body>
<div id="layout-banner-box">
<div id="layout-banner">
  <div id="layout-title">vmiklos.hu</div>
  <div id="layout-description">shameless self-promoting website</div>
</div>
</div>
<div id="layout-menu-box">
<div id="layout-menu">
  <div>&#187;<a href="/">Root</a></div>
  <div>&#187;<a href="/blog/">Rejourn root</a></div>
</div>


</div>
<div id="layout-content-box">
<div id="layout-content">
<div id="header">
	<h1>What is Miklos hacking - Tags: en</h1>
</div>
<div id="preamble">
<div class="sectionbody">




<!-- Listing -->
<div class="ulist"><ul>
<li><p>Friday, 16 November 2012<br /><a href="/blog/lo-ooxml-improvements.html">LibreOffice OOXML improvements in Writer</a>
(<a href="/blog/lo-ooxml-improvements.html#disqus_thread">Comments</a>)
</p><p><div class="paragraph"><p>It&#8217;s possible you noticed that in each LibreOffice release notes, we have a
line saying something like "improved DOCX support", but is rarely explained in
detail. I&#8217;m posting here a few screenshots to correct this. The first series is
a list of import fixes which are already available in our shipping 3.6 release.
In each case I provide a test document, and a screenshot how it looked like
with LibreOffice 3.3 and how it looks like with LibreOffice 3.6 today. Click on
the images to get a larger image:</p></div>
<div class="ulist"><ul>
<li>
<p>
document with a checked checkbox (<a href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/checkbox.docx">test doc</a>):
</p>
</li>
</ul></div>
<div align="center">
<div class="paragraph"><p><span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/checkbox-lo33.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/checkbox-lo33.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/checkbox-lo33.t.png" />
</a>
</span>
<span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/checkbox-lo36.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/checkbox-lo36.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/checkbox-lo36.t.png" />
</a>
</span></p></div>
</div>
<div class="ulist"><ul>
<li>
<p>
document with contextual spacing enabled for the numbering (<a href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/contextual-spacing.docx">test doc</a>):
</p>
</li>
</ul></div>
<div align="center">
<div class="paragraph"><p><span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/contextual-spacing-lo33.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/contextual-spacing-lo33.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/contextual-spacing-lo33.t.png" />
</a>
</span>
<span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/contextual-spacing-lo36.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/contextual-spacing-lo36.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/contextual-spacing-lo36.t.png" />
</a>
</span></p></div>
</div>
<div class="ulist"><ul>
<li>
<p>
document with a field that has a custom font size (<a href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/field-fsize.docx">test doc</a>):
</p>
</li>
</ul></div>
<div align="center">
<div class="paragraph"><p><span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/field-fsize-lo33.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/field-fsize-lo33.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/field-fsize-lo33.t.png" />
</a>
</span>
<span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/field-fsize-lo36.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/field-fsize-lo36.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/field-fsize-lo36.t.png" />
</a>
</span></p></div>
</div>
<div class="ulist"><ul>
<li>
<p>
document with a SmartArt inside (<a href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/smartart.docx">test doc</a>):
</p>
</li>
</ul></div>
<div align="center">
<div class="paragraph"><p><span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/smartart-lo33.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/smartart-lo33.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/smartart-lo33.t.png" />
</a>
</span>
<span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/smartart-lo36.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/smartart-lo36.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/smartart-lo36.t.png" />
</a>
</span></p></div>
</div>
<div class="ulist"><ul>
<li>
<p>
document with lots of VML shapes (<a href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/vml.docx">test doc</a>):
</p>
</li>
</ul></div>
<div align="center">
<div class="paragraph"><p><span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/vml-lo33.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/vml-lo33.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/vml-lo33.t.png" />
</a>
</span>
<span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/vml-lo36.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/vml-lo36.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/vml-lo36.t.png" />
</a>
</span></p></div>
</div>
<div class="ulist"><ul>
<li>
<p>
document produced by Microsoft Office 2010 (<a href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/mso-2010.docx">test doc</a>, thanks Fridrich!):
</p>
</li>
</ul></div>
<div align="center">
<div class="paragraph"><p><span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/mso-2010-lo33.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/mso-2010-lo33.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/mso-2010-lo33.t.png" />
</a>
</span>
<span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/mso-2010-lo36.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/mso-2010-lo36.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/3.6/mso-2010-lo36.t.png" />
</a>
</span></p></div>
</div>
<div class="paragraph"><p>Now let&#8217;s also have a look at some OOXML features which will be imported
correctly in our upcoming 4.0 release:</p></div>
<div class="ulist"><ul>
<li>
<p>
document with commented text ranges (<a href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/comment-textrange.docx">test doc</a>):
</p>
</li>
</ul></div>
<div align="center">
<div class="paragraph"><p><span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/comment-textrange-lo33.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/comment-textrange-lo33.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/comment-textrange-lo33.t.png" />
</a>
</span>
<span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/comment-textrange-lo4.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/comment-textrange-lo4.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/comment-textrange-lo4.t.png" />
</a>
</span></p></div>
</div>
<div class="ulist"><ul>
<li>
<p>
document with a floating table (<a href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/floating-table.docx">test doc</a>):
</p>
</li>
</ul></div>
<div align="center">
<div class="paragraph"><p><span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/floating-table-lo33.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/floating-table-lo33.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/floating-table-lo33.t.png" />
</a>
</span>
<span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/floating-table-lo4.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/floating-table-lo4.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/floating-table-lo4.t.png" />
</a>
</span></p></div>
</div>
<div class="ulist"><ul>
<li>
<p>
document with ink annotations (<a href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/ink.docx">test doc</a>, thanks Eilidh!):
</p>
</li>
</ul></div>
<div align="center">
<div class="paragraph"><p><span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/ink-lo33.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/ink-lo33.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/ink-lo33.t.png" />
</a>
</span>
<span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/ink-lo4.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/ink-lo4.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/ink-lo4.t.png" />
</a>
</span></p></div>
</div>
<div class="ulist"><ul>
<li>
<p>
document with an OLE object inside a rectangle (<a href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/ole-in-rectangle.docx">test doc</a>):
</p>
</li>
</ul></div>
<div align="center">
<div class="paragraph"><p><span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/ole-in-rectangle-lo33.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/ole-in-rectangle-lo33.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/ole-in-rectangle-lo33.t.png" />
</a>
</span>
<span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/ole-in-rectangle-lo4.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/ole-in-rectangle-lo4.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/ole-in-rectangle-lo4.t.png" />
</a>
</span></p></div>
</div>
<div class="ulist"><ul>
<li>
<p>
document with an inline image with custom margins (<a href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/wp-inline-margins.docx">test doc</a>):
</p>
</li>
</ul></div>
<div align="center">
<div class="paragraph"><p><span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/wp-inline-margins-lo33.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/wp-inline-margins-lo33.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/wp-inline-margins-lo33.t.png" />
</a>
</span>
<span class="image">
<a class="image" href="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/wp-inline-margins-lo4.png">
<img src="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/wp-inline-margins-lo4.t.png" alt="http://people.freedesktop.org/~vmiklos/2012/docx-demo/4.0/wp-inline-margins-lo4.t.png" />
</a>
</span></p></div>
</div>
<div class="paragraph"><p>If you want to try these out yourself, get a
<a href="http://dev-builds.libreoffice.org/daily/">daily build</a> and play with it! :) If
something goes wrong, report it to us in the
<a href="https://www.libreoffice.org/get-help/bug/">Bugzilla</a>, so we can try fix it
before 4.0 is released. And remember, there are lots more improvements
<a href="http://wiki.documentfoundation.org/ReleaseNotes/4.0">coming</a> in LibreOffice 4.0,
stay tuned!</p></div>
</p><hr/></li>
<li><p>Saturday, 10 November 2012<br /><a href="/blog/lo-rtfimport-drawingobjects.html">LibreOffice RTF import Drawing Objects improvements</a>
(<a href="/blog/lo-rtfimport-drawingobjects.html#disqus_thread">Comments</a>)
</p><p><div align="center">
<div class="paragraph"><p><span class="image">
<a class="image" href="https://lh6.googleusercontent.com/-mckhq4D5DG8/UJ4m54N4GoI/AAAAAAAAB1k/QwaK6eXTFBo/s800/fdo42407-lo34.png">
<img src="https://lh6.googleusercontent.com/-mckhq4D5DG8/UJ4m54N4GoI/AAAAAAAAB1k/QwaK6eXTFBo/s400/fdo42407-lo34.png" alt="https://lh6.googleusercontent.com/-mckhq4D5DG8/UJ4m54N4GoI/AAAAAAAAB1k/QwaK6eXTFBo/s400/fdo42407-lo34.png" />
</a>
</span>
<span class="image">
<a class="image" href="https://lh6.googleusercontent.com/-_9nMd0soa8E/UJ4m9vQhMiI/AAAAAAAAB1s/kc7I5YUbGnc/s800/fdo42407-master.png">
<img src="https://lh6.googleusercontent.com/-_9nMd0soa8E/UJ4m9vQhMiI/AAAAAAAAB1s/kc7I5YUbGnc/s400/fdo42407-master.png" alt="https://lh6.googleusercontent.com/-_9nMd0soa8E/UJ4m9vQhMiI/AAAAAAAAB1s/kc7I5YUbGnc/s400/fdo42407-master.png" />
</a>
</span></p></div>
</div>
<div class="paragraph"><p>It all started with <a href="https://bugs.freedesktop.org/show_bug.cgi?id=42407">this
bugreport</a> about a year ago. RTF has two different markups to describe shapes.
The old one (used till Word 6.0) is called Drawing Objects, the new one talks
about Shapes. The first picture shows the "support" for this syntax in
LibreOffice 3.4, and the situation did not change with my RTF import rework, as
I wasn&#8217;t aware of any document still using this old syntax. So when I got this
bugreport, I knew it&#8217;ll take some time to produce the correct layout, but now
during the LibreOffice conference I spent quite some time on this, and at the
end even the Hebrew text is imported correctly. ;-)</p></div>
<div class="paragraph"><p>Thanks to Lior who politely nagged me from time to time, this is now available
on master (see the second picture), which will become LibreOffice 4.0.</p></div>
</p><hr/></li>
<li><p>Saturday, 27 October 2012<br /><a href="/blog/lo-suselabs-conf.html">LibreOffice / openSUSE Conference 2012 in Berlin / Prague</a>
(<a href="/blog/lo-suselabs-conf.html#disqus_thread">Comments</a>)
</p><p><div align="center">
<div class="paragraph"><p><span class="image">
<a class="image" href="https://picasaweb.google.com/104737754628780823336/20121026_BerlinPraga#5803978714760581858">
<img src="https://lh6.googleusercontent.com/-SZwG17a3aHg/UIvf4-k7kuI/AAAAAAAAA3E/lnCa39izc7M/s400/DSC_8557.JPG" alt="https://lh6.googleusercontent.com/-SZwG17a3aHg/UIvf4-k7kuI/AAAAAAAAA3E/lnCa39izc7M/s400/DSC_8557.JPG" />
</a>
</span>
<span class="image">
<a class="image" href="https://picasaweb.google.com/104737754628780823336/20121026_BerlinPraga#5803980822428656306">
<img src="https://lh4.googleusercontent.com/-nIO9QGp7PEw/UIvhzqQKIrI/AAAAAAAAA7k/os6KbNCjCzE/s400/DSC_8593.JPG" alt="https://lh4.googleusercontent.com/-nIO9QGp7PEw/UIvhzqQKIrI/AAAAAAAAA7k/os6KbNCjCzE/s400/DSC_8593.JPG" />
</a>
</span></p></div>
</div>
<div class="paragraph"><p>I spent the last two weeks on two conferences:</p></div>
<div class="ulist"><ul>
<li>
<p>
LibreOffice Conference in Berlin, where I <a href="https://speakerdeck.com/vmiklos/how-to-add-a-new-writer-feature">gave a talk</a> (it is promised that there will be even a video record available later)
</p>
</li>
<li>
<p>
openSUSE conference in Prague, where I just attended.
</p>
</li>
</ul></div>
<div class="paragraph"><p>In general, thanks for the organizers for these fantastic events!</p></div>
<div class="paragraph"><p>A few fun facts I discovered during the conference:</p></div>
<div class="ulist"><ul>
<li>
<p>
Armin is referred in the source tree as AW due to&#8230; well, it&#8217;s easy to find out once you heard about OD&#8217;s ORW reincarnation. :-)
</p>
</li>
<li>
<p>
<tt>solver</tt> stands for "solar version", it does not solve anything (read Michael Stahl&#8217;s talk for details)
</p>
</li>
<li>
<p>
I just discovered <a href="http://www.openoffice.org/marketing/ooocon2006/presentations/wednesday_d12.odp">this</a> presentation of Thorsten, slide 15 mentions a bug on x86, which is still the case on Android, 6 years later.. (even mentioned in Tor&#8217;s talk)
</p>
</li>
<li>
<p>
"Java? I hope that language dies" (Jan Engelhardt, openSUSE Sparc guy)
</p>
</li>
<li>
<p>
"Browser: we&#8217;re there; Office: with LibreOffice&#8201;&#8212;&#8201;even if it&#8217;s not perfect, we&#8217;re getting there. Groupware: we&#8217;re weak here" (Georg Greve, Kolab guy)
</p>
</li>
<li>
<p>
Don&#8217;t try to change EUR to CZK in the Prague main station, they have ridiculously bad rates
</p>
</li>
</ul></div>
<div class="paragraph"><p>A few pictures <a href="https://picasaweb.google.com/104737754628780823336/20121026_BerlinPraga">here</a>.</p></div>
</p><hr/></li>
<li><p>Wednesday, 10 October 2012<br /><a href="/blog/lo-firstpage-headerfooter.html">LibreOffice Writer now supports first page header/footer</a>
(<a href="/blog/lo-firstpage-headerfooter.html#disqus_thread">Comments</a>)
</p><p><div class="paragraph"><p>When you want to have pages with different properties in Writer, you use page
styles. If you want to do something similar in Word, you have to use sections.
One of the benefits of page styles is that you can use them multiple times, and&#8201;&#8212;&#8201;as usual with styles&#8201;&#8212;&#8201;whenever you change your mind, you can edit just the
style, and all its uses will be updated consistently. There is, however, one
feature that Word sections have and we lacked so far: sections can have
different headers and footers on first, left and right pages. In Writer, you
had to use two different page styles if you wanted to achieve the same:
typically named "First page", then a "Default". This was because Writer could
differentiate only between right and left pages, not first ones.</p></div>
<div class="paragraph"><p>In LibreOffice 3.7, there will be a new checkbox to "unshare" the header and
footer of the first page with right/left pages:</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<a class="image" href="http://wiki.documentfoundation.org/File:Sw-firstpage-headerfooter.png">
<img src="http://wiki.documentfoundation.org/images/thumb/f/f2/Sw-firstpage-headerfooter.png/400px-Sw-firstpage-headerfooter.png" alt="http://wiki.documentfoundation.org/images/thumb/f/f2/Sw-firstpage-headerfooter.png/400px-Sw-firstpage-headerfooter.png" />
</a>
</div>
</div>
<div class="paragraph"><p>Right now, only ODF filters are updated to open / save this feature (as
suggested by <a href="https://wiki.oasis-open.org/office/HeaderFooterFirst">this</a> old
proposal)&#8201;&#8212;&#8201;in later versions it&#8217;s planned to update the DOCX, DOC and RTF
filters as well, removing quite some code from import filters working around
this limitation of Writer core.</p></div>
</p><hr/></li>
<li><p>Thursday, 27 September 2012<br /><a href="/blog/cyanogenmod.html">CyanogenMod</a>
(<a href="/blog/cyanogenmod.html#disqus_thread">Comments</a>)
</p><p><div class="paragraph"><p>So even if I <a href="http://vmiklos.hu/blog/galaxy-s">bookmarked</a> a thread to have a
look at the CyanogenMod install on my phone last year, I didn&#8217;t have a look at
that till yesterday. The final motivation was that I thought that CM 9.1 (not
containing any Samsung code) will not be vulnerable wrt.
<a href="http://www.h-online.com/security/news/item/Remote-resetting-a-Samsung-phone-made-easy-1717115.html">the
issue reported 2 days ago</a>. Later turned out that installing
<a href="https://play.google.com/store/apps/details?id=com.voss.notelurl">this app</a> is
enough, even if you stick to the older firmware supplied by Samsung, but once
CM was installed, I haven&#8217;t looked back.</p></div>
<div class="paragraph"><p>The
<a href="http://wiki.cyanogenmod.com/wiki/Samsung_Galaxy_S:_Full_Update_Guide">install
guide</a> was easy to follow, it seems that newer Samsung devices have download
mode enabled by default, so you need no cracking, the ClockworkMod Recovery and
then CyanogenMod can be installed without any problems. Probably the only
nontrivial part is that you do want Google Apps, even if you disable most of
that stuff later, as the Play Store is part of that collection as well.  As the
guide suggests, I made a full backup, then after the install I restored the
important part of my settings.</p></div>
<div class="paragraph"><p>For the reference, here is how my home screen looked before and after the
reinstall:</p></div>
<div align="center">
<div class="paragraph"><p><span class="image">
<a class="image" href="https://lh3.googleusercontent.com/-3yK5eWM3LRc/UBj7btQMSEI/AAAAAAAABd0/Ap4_8iyBUhY/s800/SC20120323-153702.png">
<img src="https://lh3.googleusercontent.com/-3yK5eWM3LRc/UBj7btQMSEI/AAAAAAAABd0/Ap4_8iyBUhY/s400/SC20120323-153702.png" alt="https://lh3.googleusercontent.com/-3yK5eWM3LRc/UBj7btQMSEI/AAAAAAAABd0/Ap4_8iyBUhY/s400/SC20120323-153702.png" />
</a>
</span>
<span class="image">
<a class="image" href="https://lh4.googleusercontent.com/-gNy49Bf251w/UGP7Fb1PrII/AAAAAAAABmg/v6GUhZaDluw/s800/Screenshot_2012-09-27-08-53-23.png">
<img src="https://lh4.googleusercontent.com/-gNy49Bf251w/UGP7Fb1PrII/AAAAAAAABmg/v6GUhZaDluw/s400/Screenshot_2012-09-27-08-53-23.png" alt="https://lh4.googleusercontent.com/-gNy49Bf251w/UGP7Fb1PrII/AAAAAAAABmg/v6GUhZaDluw/s400/Screenshot_2012-09-27-08-53-23.png" />
</a>
</span></p></div>
</div>
</p><hr/></li>
<li><p>Sunday, 16 September 2012<br /><a href="/blog/frugalware-history.html">Frugalware history</a>
(<a href="/blog/frugalware-history.html#disqus_thread">Comments</a>)
</p><p><div class="paragraph"><p>Given that Frugalware was founded by me, and recently James recently took over
the project leadership, I think it makes sense to look back and summarize the
past 6 years.</p></div>
<div class="sect1">
<h2 id="_the_beginning">The beginning</h2>
<div class="sectionbody">
<div class="paragraph"><p>It all started with
<a href="http://frugalware.org/pipermail/frugalware-announce/2004-September/000001.html">this
announcement</a> about 6 years ago. It was a one-man show before, there was a
<a href="http://ftp.frugalware.org/pub/archive/frugalware-0.1/ChangeLog.txt">manually
written ChangeLog</a> but even then there were already quite a few packages, so
don&#8217;t ask me when I started hacking on this. Yes, normally there would be a
first commit in git, but remember this was before git existed, and I hated
centralized CVS so much that we didn&#8217;t use anything.</p></div>
<div class="paragraph"><p>Looking back, it was all quite lame. :-) I used a mail address called "mamajom"
(English translation could be "momonkey"), tied to an ISP, with a lengthy
signature at the end of every mail I sent and was using my IRC nick instead of
my real one everywhere&#8230; OTOH, I made some decisions I&#8217;m happy about even
today. The first four developers (Ádám Zlehovszky, Krisztián Vasas, Zsolt
Szalai and me) were all Hungarian and despite of this, I forced every code,
test and documentation to be in English, to possibly turn the project into an
international one in the future. And that proved to very, very useful.</p></div>
<div class="paragraph"><p>It was between 0.1 and 0.2 that we (Krisztián, Zsolt and me) showed up in a
Hungarian TV (<a href="http://ftp.frugalware.org/pub/other/videos/hu/">video record</a>)
explaining Frugalware. This is something never happened later for some reason.</p></div>
<div class="paragraph"><p>The way we found a free hosting at a university I never attended may be also
interesting. In the grammar school, our IT teacher found my Linux distribution
idea interesting enough to support, and his friend was a teacher at the Eötvös
Loránd University, which is at the same Budapest city where I live. So, with my
friend Botond Balázs (who later was my witness at our wedding) we bought an
ultra-slow old PC (some Pentium 1 with a single HDD) and we were extremely
happy, as the uni offered to host it for free. I remember it ran some Slackware
version, as Frugalware didn&#8217;t support i586&#8230; ;-)</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_early_days">Early days</h2>
<div class="sectionbody">
<div class="paragraph"><p>Then some more developers joined and we started to package all the usual free
software which is available in other distributions but I personally didn&#8217;t use.
Think of GNOME, Xfce, OpenOffice.org and so on.</p></div>
<div class="paragraph"><p>Of course we were still lame, the announcements still were not spellchecked by
someone native and knowledgeable enough, ending up in words like "splitted" or
"optimalization". However, we started to use an SCM (Darcs, which was horribly
slow, but at least not the centralized CVS crap). Another developer I should
mention was Bence Nagy, he came up with the idea of how we should avoid
duplication in FrugalBuilds, leading to the various package templates under
<tt>source/include/</tt> in the source tree.</p></div>
<div class="paragraph"><p>Then we went multiarch, Krisztián Hamar contributed the x86_64 port to the 0.3
release. At the same time, I invented <tt>syncpkg</tt>, which avoided having to build
the same package on multiple architectures manually.</p></div>
<div class="paragraph"><p>We also got Gábor Lőcsei (later we met IRL and completed several bike marathons
together, resulting in a great friendship) who helped users in general on IRC,
but more importantly, for some time he did quite some bug triaging, leading to
a much better bugzilla (actually it was running Flyspray at that time) state.</p></div>
<div class="paragraph"><p>The constant questions of László Csécsy (who nowadays mostly hacks
Drupal core and its modules) generated more and more improving documentation.
We first started with a LaTeX documentation, then later turned it to an
asciidoc one, in the hope of attracting more non-math contributors. ;-)</p></div>
<div class="paragraph"><p>Then we started to have some beautiful artwork, Viktor Gondor contributed some
really cool wallpapers.</p></div>
<div class="paragraph"><p>Finally, I think the last two Hungarian guys who spent a hell of a time on the
project was András Vöröskői (we still link his
<a href="http://frugalware.org/docs/getting-involved/en">getting started HOWTO</a> for new
contributors) and János Kovács. I remember for a long time I used the
home-hosted server of János when we didn&#8217;t have a fast dedicated i686 build
server and my desktop was still 32bit.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_going_international">Going international</h2>
<div class="sectionbody">
<div class="paragraph"><p>Then things started to happen fast. Developers outside Hungary showed up:
Gabriel Craciunescu from Germany and Michel Hermier from France worked a lot on
KDE, Gabriel also hacked a lot of the core OS, like kernel, glibc, etc.</p></div>
<div class="paragraph"><p>Priyank Gosalia from India started to work on GTK tools like a package manager
frontend. David Kimpe contributed a PPC port years before I got my iBook (which
I used as my primary box for a few years).</p></div>
<div class="paragraph"><p>And needless to say, we still made mistakes. We thought that the development of
the original Pacman package manager slowed down, its rewrite (providing a
separate library and a console frontend, instead of one monolithic binary)
seemed to never complete, and given that we were not Archlinux developers, we
never got access to its CVS. We started to use that library API in the
installer, testcases, GUI tools, while changing the API for them wasn&#8217;t an
issue, since officially it was still unreleased. All this frustration (and
underestimating the cost of maintaining a fork) resulted in our Pacman-G2
project. First it appeared to be shiny, but once Krisztián Hamar left
Frugalware, we constantly lacked manpower and today the consensus is that with
git, maintaining a patchset over pacman.git would be far better, just nobody
did the work of merging the two projects. Pacman-G2 is in maintenance mode
today, and it still well serves its purpose, but it didn&#8217;t see any new major
feature in years.</p></div>
<div class="paragraph"><p>We also saw a rewrite of the installer. The original one was written in bash,
then the second was written in C, using libdialog. And currently James works on
a third one, hopefully fixing lots of instability, resulting from the design
errors of the current one. ;-)</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_more_and_more_developers">More and more developers</h2>
<div class="sectionbody">
<div class="paragraph"><p>And then somehow more and more developers came. Gourdin Gaetan (bouleetbil) and
Sébastien Vincent (Baste) worked a lot on the GNOME support, James Buren took
over the base system from me. Paolo Cretaro (Melko) does KDE bumps nowadays and
Marius Cirsta (mcirsta) did heroic work of including OpenJDK 7 into Frugalware.</p></div>
<div class="paragraph"><p>Abdelmoumene Hamza (Slown) is a guy who volunteered to do a log of boring work.
When you can install a random Perl on Python module from a package, chances
that it was packaged by Slown are high. ;-)</p></div>
<div class="paragraph"><p>Regarding infrastructure, Benjamin Nolmans (Xarkam) stepped up, and finally
converted the data from our Flyspray instance to the more mainstream and
maintained Trac format. Regarding architectures Boris Albar (Elentir)
contributed an ARM port. Our press noise was generated by Russell Dickenson
(phayz) for a long time: he wrote newsletters regularly, and these days he
works as a documentation writer for Red Hat.</p></div>
<div class="paragraph"><p>For a long time, no more Hungarians joined the project. Then Bagdán Róbert
(kikadf) came, and even if he&#8217;s rarely present on IRC, he still contributes
from time to time, and these small, but valuable contributions are what keep
Frugalware alive. :-)</p></div>
<div class="paragraph"><p>Regarding other big upgrades, Daniel Exner (dex) was the guy who stepped up and
finally packaged KDE4 for Frugalware. All KDE4 users meeting him should buy a
beer for him. ;-) Anthony Jorion (pingax) joined in 2010, and since then he
does XFCE updates.</p></div>
<div class="paragraph"><p>Finally, I should not forget about Daniel Eledut (Devil505), who probably
helped me the most with my "the rest" task: he really helped out in various
areas, and he was a major Frugalware contributor for a long time.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_the_end_of_my_leadership">The end of my leadership</h2>
<div class="sectionbody">
<div class="paragraph"><p>Contributing to other projects is something I did regularly, since every time I
got a bugreport for a package, first I created a patch to fix the problem (in
case it could not be worked around in the buildscript), and then of course
tried to upstream it, knowing the maintenance cost of non-upstreamed patches.
Still, these were minor and my main project was Frugalware for years.</p></div>
<div class="paragraph"><p>The bigger contributions came when I started to complete Google Summer of Code
projects, first SWIG, then git, finally OpenOffice.org&#8201;&#8212;&#8201;which turned into
LibreOffice. The motivation is easy: these were still Free Software hacking,
but given that they are not bash hacking (like most packaging work for
Frugalware), more interesting problem had to be solved, GSoC also provided nice
payments, and needless to say: was useful to many people not using Frugalware.</p></div>
<div class="paragraph"><p>The idea of passing over my leadership to someone else first came when I
looked back, and I saw that I spend more time on LibreOffice than on
Frugalware, even after the paid GSoC ended (later resulting in joining SUSE to
work on LibreOffice fulltime). My focus somehow just shifted from hacking a
distribution to hacking something that is directly useful for average users as
well. It&#8217;s not worse or better, it&#8217;s just different, and after lots of years, I
wanted to do something different.</p></div>
<div class="paragraph"><p>To sum up, I did not reach my expectations as a project leader and I waited for
a candidate I could teach and finally who could become as good as I was in
earlier years, or hopefully even better. And then James came, who first took
over the base system, and we agreed that after 1.7, he&#8217;ll do releases. So it
was not unexpected, but still I was a bit surprised when I saw his
role-changing
<a href="http://git.frugalware.org/gitweb/gitweb.cgi?p=frugalware-current.git;a=commitdiff;h=979ada221b2f822f88f4468e6aefc2487fe87e48">commit</a>.
But needless to say, when thinking a bit more, it was completely logical, all I
really do these days is fixing things left and right regarding my arm port
needs, and maintaining the LibreOffice package.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_summary">Summary</h2>
<div class="sectionbody">
<div class="paragraph"><p>The idea of writing this post is not mine. However, when I thought about how
many individuals helped this project so far, I realized I really need to create
a summary, thanking their work. Reading the above, I hope that in the past
years my leadership to Frugalware were useful and I realize that these days I
have to step back, given a better leader appeared. I honestly wish the project
to see at least as many releases as we already have, now that fresh energy
leads it. :-)</p></div>
<div class="paragraph"><p>I tried to point out all our heroes during the last years, but it&#8217;s possible I
forgot someone. If you think you&#8217;re missing from this post, please leave a
comment. Thanks.</p></div>
</div>
</div>
</p><hr/></li>
<li><p>Friday, 10 August 2012<br /><a href="/blog/lo-sw-comment-range.html">LibreOffice Writer can now attach comments to text ranges</a>
(<a href="/blog/lo-sw-comment-range.html#disqus_thread">Comments</a>)
</p><p><div class="paragraph"><p>More than 10 years ago, a <a href="https://issues.apache.org/ooo/show_bug.cgi?id=5487">bug</a> was
opened in the OpenOffice.org bugzilla to support this feature. Later this got
<a href="https://bugs.freedesktop.org/show_bug.cgi?id=38244">imported</a> to LibreOffice&#8217;s
bugtracker. Now that LibreOffice 3.6 is out, time to talk more about what
features will show up in 3.7, and this will be one of them:</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<a class="image" href="https://wiki.documentfoundation.org/File:Comment-text-range.png">
<img src="https://wiki.documentfoundation.org/images/thumb/5/5e/Comment-text-range.png/400px-Comment-text-range.png" alt="https://wiki.documentfoundation.org/images/thumb/5/5e/Comment-text-range.png/400px-Comment-text-range.png" />
</a>
</div>
</div>
<div class="paragraph"><p>Now that it&#8217;s there, let&#8217;s have a look at the details:</p></div>
<div class="ulist"><ul>
<li>
<p>
ODF 1.2 already
  <a href="http://docs.oasis-open.org/office/v1.2/cs01/OpenDocument-v1.2-cs01-part1.html#__RefHeading__1416196_253892949">supports</a>
  commenting text ranges, but LibreOffice support was missing.
</p>
</li>
<li>
<p>
Word already supported it as well, and now LibreOffice RTF/DOCX import/export filters are updated to take care of the new feature.
</p>
</li>
<li>
<p>
If I was already messing with comments, I also implemented roundtrip of
  <a href="http://msdn.microsoft.com/en-us/library/documentformat.openxml.wordprocessing.comment.initials">comment author initials</a> to ODF (see
  <a href="https://tools.oasis-open.org/issues/browse/OFFICE-3776">proposal</a>), so now if
  you open a DOCX/RTF file in LibreOffice, save it as ODF, and later save it back
  to DOCX/RTF, this information won&#8217;t be lost.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Finally, one known limitation is that the text range currently can&#8217;t include
multiple paragraphs&#8201;&#8212;&#8201;something to improve later if necessary.</p></div>
</p><hr/></li>
<li><p>Wednesday, 01 August 2012<br /><a href="/blog/lo-rtf-math-native.html">LibreOffice can now import/export native RTF math expressions in Writer</a>
(<a href="/blog/lo-rtf-math-native.html#disqus_thread">Comments</a>)
</p><p><div class="paragraph"><p>You may remember that LibreOffice 3.5 learned to
<a href="http://wiki.documentfoundation.org/ReleaseNotes/3.5#Filters">import
RTF OLE objects</a> (including math expressions) in Writer. In LibreOffice 3.7, the same is now true for math expressions expressed using <a href="http://blogs.msdn.com/b/murrays/archive/2006/10/25/mathematical-rtf.aspx">native RTF math markup</a>:</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<a class="image" href="https://wiki.documentfoundation.org/File:Rtf-math-native.png">
<img src="https://wiki.documentfoundation.org/images/thumb/1/1e/Rtf-math-native.png/400px-Rtf-math-native.png" alt="https://wiki.documentfoundation.org/images/thumb/1/1e/Rtf-math-native.png/400px-Rtf-math-native.png" />
</a>
</div>
</div>
<div class="paragraph"><p>If you are interested in the details, then the nice thing about this
implementation is that:</p></div>
<div class="ulist"><ul>
<li>
<p>
The importer internally turns RTF markup to OOXML tokens, and that does the hard job.
</p>
</li>
<li>
<p>
The non-XML-specific part of the existing OOXML export was abstracted to a
  base class, and that&#8217;s the driver of the RTF exporter.
</p>
</li>
</ul></div>
<div class="paragraph"><p>So if you like this new feature, don&#8217;t forget to thank Luboš Luňák, who is the
author of the OOXML math import/export. :-) In case you way to play with this
feature, test documents are
<a href="http://cgit.freedesktop.org/libreoffice/core/tree/sw/qa/extras/rtfexport/data">available</a>.</p></div>
</p><hr/></li>
<li><p>Sunday, 29 July 2012<br /><a href="/blog/grub2.html">GRUB2 vs. RAID1, cfdisk and serial console</a>
(<a href="/blog/grub2.html#disqus_thread">Comments</a>)
</p><p><div class="paragraph"><p>Since the Frugalware 1.7 release is near, and it uses GRUB2 by default, I
created a virtual machine, that is similar to the one we use under
<tt>genesis.frugalware.org</tt>, which hosts this blog as well.</p></div>
<div class="paragraph"><p>The relevant details:</p></div>
<div class="ulist"><ul>
<li>
<p>
it has two RAID1 arrays with ext3:
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ mount|grep /md
/dev/md126 on / type ext3 (rw,relatime,errors=continue,barrier=1,data=ordered)
/dev/md127 on /home/ftp/pub type ext3 (rw,relatime,errors=continue,barrier=1,data=ordered)</tt></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
the partition tables are created by cfdisk:
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><tt>   Device Boot      Start         End      Blocks   Id  System
/dev/sda1              63  1465144064   732572001   fd  Linux raid autodetect</tt></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
the machine has a serial console configured:
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><tt># cat /proc/cmdline
root=/dev/disk/by-uuid/7e41c95d-cd73-4043-b0ba-4797af6ddeff ro vga=normal nomodeset console=ttyS1,115200</tt></pre>
</div></div>
<div class="paragraph"><p>Now the question is how does this config deal with the GRUB2 upgrade. First,
don&#8217;t miss the official <a href="http://frugalware.org/docs/upgrade">upgrade howto</a>, it
covers most cases. What I want to detail here is how did I avoid starting from
scratch and creating a proper partition table using fdisk.</p></div>
<div class="paragraph"><p>Here are the steps I needed:</p></div>
<div class="ulist"><ul>
<li>
<p>
Backup. Yes, I did screw up for the first time, so it&#8217;s really needed.
</p>
</li>
<li>
<p>
Resize parts of the / RAID1 (/dev/sda1 and /dev/sdb1) with gparted livecd (resizing ext3 from cmdline parted didn&#8217;t work for me).
</p>
</li>
<li>
<p>
mdadm re-creation as described in the upgrade howto, from fw install cd, so you&#8217;ll have the required 1.0 metadata.
</p>
</li>
<li>
<p>
Reinstall GRUB1 to sda and sdb, since the physical location of GRUB1&#8217;s stage* changed.
</p>
</li>
<li>
<p>
Boot back to 1.6, run <tt>pacman-g2 -Syu</tt>, and <tt>grub-install</tt>&#8201;&#8212;&#8201;again, see the upgrade howto for details.
</p>
</li>
<li>
<p>
Now given that serial console needs a custom GRUB config and kernel parameters, you need to modify GRUB2&#8217;s <tt>/etc/default/grub</tt>. Here is my diff:
</p>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>/etc/default# diff -u grub.orig grub
<span style="color: #FF6600">--- grub.orig   2012-07-19 01:57:20.000000000 +0200</span>
<span style="color: #009900">+++ grub        2012-07-29 14:45:50.000000000 +0200</span>
<span style="color: #0000FF">@@ -1,11 +1,12 @@</span>
 GRUB_DEFAULT=0
 GRUB_TIMEOUT=5
 GRUB_DISTRIBUTOR="Frugalware 1.6"
<span style="color: #FF6600">-GRUB_CMDLINE_LINUX_DEFAULT="quiet splash"</span>
<span style="color: #009900">+GRUB_CMDLINE_LINUX_DEFAULT="vga=normal nomodeset plymouth.enable=0 console=ttyS0,115200"</span>
 GRUB_CMDLINE_LINUX=""
 GRUB_PRELOAD_MODULES=""
<span style="color: #FF6600">-GRUB_TERMINAL_INPUT=console</span>
<span style="color: #FF6600">-GRUB_TERMINAL_OUTPUT=gfxterm</span>
<span style="color: #009900">+GRUB_TERMINAL_INPUT=serial</span>
<span style="color: #009900">+GRUB_SERIAL_COMMAND="serial --speed=115200 --port=0x3f8"</span>
<span style="color: #009900">+GRUB_TERMINAL_OUTPUT=serial</span>
 #GRUB_GFXPAYLOAD_LINUX=keep
 GRUB_GFXMODE=auto
 #GRUB_DISABLE_LINUX_UUID=true</tt></pre></div></div>
<div class="paragraph"><p>(Refer to <a href="/blog/amtterm">this post</a> if you don&#8217;t know the needed port number.)</p></div>
</li>
<li>
<p>
Finally run <tt>grub-mkconfig</tt> to create the real config from the just modified default settings.
</p>
</li>
<li>
<p>
Reboot, and GRUB2, the boot process and the login prompt should be accessible over the serial console again.
</p>
</li>
</ul></div>
</p><hr/></li>
<li><p>Monday, 11 June 2012<br /><a href="/blog/exif-date-sort.html">Sorting photos by date using exif date info</a>
(<a href="/blog/exif-date-sort.html#disqus_thread">Comments</a>)
</p><p><div class="paragraph"><p>For a family event I received photos from about 6 persons, and wanted to view
all of them, sorted by date. The problem was that the timestamps of the files
were sometimes incorrect, and also in all but one cases the exif timestamp was
incorrect as well (but at least that was consistently incorrect, e.g. all
behind of time by 20 mins, etc.)</p></div>
<div class="paragraph"><p>So first I searched for a photo where a clock is shown, then matched photos by
different authors showing the same action to know the time delta of each
camera. The rest can be scripted: just read the exif info, apply the necessary
time correction based on the camera model, and touch the file with the correct
date. Then any image viewer can show the photos, sorted by date.</p></div>
<div class="paragraph"><p>Here is the script I came up with:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">for</span></span> i <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> <span style="color: #990000">*.</span>jpg
<span style="font-weight: bold"><span style="color: #0000FF">do</span></span>
    <span style="font-style: italic"><span style="color: #9A1900"># 2012:01:01 01:01:01 -&gt; 2012-01-01 01:01:01</span></span>
    <span style="color: #009900">date</span><span style="color: #990000">=</span><span style="color: #009900">$(</span>exiv2 <span style="color: #009900">$i</span> <span style="color: #990000">|</span>grep timestamp<span style="color: #990000">|</span>sed <span style="color: #FF0000">'s/.* : //'</span><span style="color: #990000">|</span>sed <span style="color: #FF0000">'s/^</span><span style="color: #CC33CC">\(</span><span style="color: #FF0000">[0-9][0-9][0-9][0-9]</span><span style="color: #CC33CC">\)</span><span style="color: #FF0000">:</span><span style="color: #CC33CC">\(</span><span style="color: #FF0000">[0-9][0-9]</span><span style="color: #CC33CC">\)</span><span style="color: #FF0000">:</span><span style="color: #CC33CC">\(</span><span style="color: #FF0000">[0-9][0-9]</span><span style="color: #CC33CC">\)</span><span style="color: #FF0000">/</span><span style="color: #CC33CC">\1</span><span style="color: #FF0000">-</span><span style="color: #CC33CC">\2</span><span style="color: #FF0000">-</span><span style="color: #CC33CC">\3</span><span style="color: #FF0000">/'</span><span style="color: #990000">)</span>
    <span style="font-style: italic"><span style="color: #9A1900"># date string -&gt; epoch</span></span>
    <span style="color: #009900">unix</span><span style="color: #990000">=</span><span style="color: #009900">$(</span>date --date<span style="color: #990000">=</span><span style="color: #FF0000">"$date"</span> <span style="color: #990000">+%</span>s<span style="color: #990000">)</span>

    <span style="color: #009900">model</span><span style="color: #990000">=</span><span style="color: #009900">$(</span>exiv2 <span style="color: #009900">$i</span> <span style="color: #990000">|</span>grep model<span style="color: #990000">|</span>sed <span style="color: #FF0000">'s/.*: //'</span><span style="color: #990000">)</span>

    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">[</span> <span style="color: #FF0000">"$model"</span> <span style="color: #990000">==</span> <span style="color: #FF0000">"NIKON D40"</span> <span style="color: #990000">];</span> <span style="font-weight: bold"><span style="color: #0000FF">then</span></span>
        <span style="color: #009900">unix</span><span style="color: #990000">=</span><span style="color: #009900">$(($unix-1320))</span> <span style="font-style: italic"><span style="color: #9A1900"># Alice</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
        <span style="color: #009900">unix</span><span style="color: #990000">=</span><span style="color: #009900">$(($unix+3600))</span> <span style="font-style: italic"><span style="color: #9A1900"># Bob</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">fi</span></span>

    <span style="font-style: italic"><span style="color: #9A1900"># epoch -&gt; date string</span></span>
    <span style="color: #009900">date</span><span style="color: #990000">=</span><span style="color: #009900">$(</span>python -c <span style="color: #FF0000">"import time; print time.strftime('%Y-%m-%d %H:%M:%S', time.localtime($unix))"</span><span style="color: #990000">)</span>
    <span style="font-style: italic"><span style="color: #9A1900"># profit!</span></span>
    touch --date<span style="color: #990000">=</span><span style="color: #FF0000">"$date"</span> <span style="color: #009900">$i</span>
<span style="font-weight: bold"><span style="color: #0000FF">done</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># write back the timestamps to the exif info (thx boobaa)</span></span>
jhead -dsft <span style="color: #990000">*.</span>jpg</tt></pre></div></div>
</p><hr/></li>
</ul></div>
<a href="/blog/archive.html">more &raquo;</a>
<script type="text/javascript">
var disqus_shortname = 'vmiklos';
(function () {
 var s = document.createElement('script'); s.async = true;
 s.src = 'http://disqus.com/forums/vmiklos/count.js';
 (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>

</div>
</div>
</div>
</div>
</body>
</html>
