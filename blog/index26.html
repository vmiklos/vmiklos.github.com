<!DOCTYPE html>
<html lang="en">

<head>
  <!-- ## for client-side less
  <link rel="stylesheet/less" type="text/css" href="https://vmiklos.hu/blog/theme/css/style.less">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js" type="text/javascript"></script>
  -->
  <link rel="stylesheet" type="text/css" href="https://vmiklos.hu/blog/theme/css/style.css">
  <link rel="stylesheet" type="text/css" href="https://vmiklos.hu/blog/theme/css/pygments.css">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Miklos Vajna">
  <meta name="description" content="Posts and writings by Miklos Vajna">

  <link href="https://vmiklos.hu/blog/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="What is Miklos hacking RSS" />


  <title>
    What is Miklos hacking
  </title>

<script type="text/javascript">
  var _paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//analytics.vmiklos.hu/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
</head>

<body>
  <aside>
    <div id="user_meta">
      <h2><a href="https://vmiklos.hu/blog">What is Miklos hacking</a></h2>
      <p></p>
      <ul>
        <li><a href="/" target="_blank">Root</a></li>
        <li><a href="https://planet.documentfoundation.org/" target="_blank">LibreOffice Blogs</a></li>
      </ul>
    </div>
  </aside>

  <main>
    <header>
      <p>
      <a href="https://vmiklos.hu/blog">Index</a> &brvbar; <a href="https://vmiklos.hu/blog/archives.html">Archives</a>
      &brvbar; <a href="https://vmiklos.hu/blog/feeds/all.rss.xml">RSS</a>
      </p>
    </header>

<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/lo-sw-comment-range.html">LibreOffice Writer can now attach comments to text ranges</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Fri 10 August 2012</p>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 1 minutes</p>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>More than 10 years ago, a <a href="https://issues.apache.org/ooo/show_bug.cgi?id=5487">bug</a> was
opened in the OpenOffice.org bugzilla to support this feature. Later this got
<a href="https://bugs.freedesktop.org/show_bug.cgi?id=38244">imported</a> to LibreOffice&#8217;s
bugtracker. Now that LibreOffice 3.6 is out, time to talk more about what
features will show up in 3.7, and this will be one of them:</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<a class="image" href="https://wiki.documentfoundation.org/File:Comment-text-range.png">
<img src="https://wiki.documentfoundation.org/images/thumb/5/5e/Comment-text-range.png/400px-Comment-text-range.png" alt="https://wiki.documentfoundation.org/images/thumb/5/5e/Comment-text-range.png/400px-Comment-text-range.png" />
</a>
</div>
</div>
<div class="paragraph"><p>Now that it&#8217;s there, let&#8217;s have a look at the details:</p></div>
<div class="ulist"><ul>
<li>
<p>
ODF 1.2 already
  <a href="http://docs.oasis-open.org/office/v1.2/cs01/OpenDocument-v1.2-cs01-part1.html#__RefHeading__1416196_253892949">supports</a>
  commenting text ranges, but LibreOffice support was missing.
</p>
</li>
<li>
<p>
Word already supported it as well, and now LibreOffice RTF/DOCX import/export filters are updated to take care of the new feature.
</p>
</li>
<li>
<p>
If I was already messing with comments, I also implemented roundtrip of
  <a href="http://msdn.microsoft.com/en-us/library/documentformat.openxml.wordprocessing.comment.initials">comment author initials</a> to ODF (see
  <a href="https://tools.oasis-open.org/issues/browse/OFFICE-3776">proposal</a>), so now if
  you open a DOCX/RTF file in LibreOffice, save it as ODF, and later save it back
  to DOCX/RTF, this information won&#8217;t be lost.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Finally, one known limitation is that the text range currently can&#8217;t include
multiple paragraphs&#8201;&#8212;&#8201;something to improve later if necessary.</p></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/lo-rtf-math-native.html">LibreOffice can now import/export native RTF math expressions in Writer</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Wed 01 August 2012</p>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 1 minutes</p>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>You may remember that LibreOffice 3.5 learned to
<a href="http://wiki.documentfoundation.org/ReleaseNotes/3.5#Filters">import
RTF OLE objects</a> (including math expressions) in Writer. In LibreOffice 3.7, the same is now true for math expressions expressed using <a href="http://blogs.msdn.com/b/murrays/archive/2006/10/25/mathematical-rtf.aspx">native RTF math markup</a>:</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<a class="image" href="https://wiki.documentfoundation.org/File:Rtf-math-native.png">
<img src="https://wiki.documentfoundation.org/images/thumb/1/1e/Rtf-math-native.png/400px-Rtf-math-native.png" alt="https://wiki.documentfoundation.org/images/thumb/1/1e/Rtf-math-native.png/400px-Rtf-math-native.png" />
</a>
</div>
</div>
<div class="paragraph"><p>If you are interested in the details, then the nice thing about this
implementation is that:</p></div>
<div class="ulist"><ul>
<li>
<p>
The importer internally turns RTF markup to OOXML tokens, and that does the hard job.
</p>
</li>
<li>
<p>
The non-XML-specific part of the existing OOXML export was abstracted to a
  base class, and that&#8217;s the driver of the RTF exporter.
</p>
</li>
</ul></div>
<div class="paragraph"><p>So if you like this new feature, don&#8217;t forget to thank Luboš Luňák, who is the
author of the OOXML math import/export. :-) In case you way to play with this
feature, test documents are
<a href="http://cgit.freedesktop.org/libreoffice/core/tree/sw/qa/extras/rtfexport/data">available</a>.</p></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/grub2.html">GRUB2 vs. RAID1, cfdisk and serial console</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Sun 29 July 2012</p>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 2 minutes</p>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>Since the Frugalware 1.7 release is near, and it uses GRUB2 by default, I
created a virtual machine, that is similar to the one we use under
<code>genesis.frugalware.org</code>, which hosts this blog as well.</p></div>
<div class="paragraph"><p>The relevant details:</p></div>
<div class="ulist"><ul>
<li>
<p>
it has two RAID1 arrays with ext3:
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><code>$ mount|grep /md
/dev/md126 on / type ext3 (rw,relatime,errors=continue,barrier=1,data=ordered)
/dev/md127 on /home/ftp/pub type ext3 (rw,relatime,errors=continue,barrier=1,data=ordered)</code></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
the partition tables are created by cfdisk:
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><code>   Device Boot      Start         End      Blocks   Id  System
/dev/sda1              63  1465144064   732572001   fd  Linux raid autodetect</code></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
the machine has a serial console configured:
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><code># cat /proc/cmdline
root=/dev/disk/by-uuid/7e41c95d-cd73-4043-b0ba-4797af6ddeff ro vga=normal nomodeset console=ttyS1,115200</code></pre>
</div></div>
<div class="paragraph"><p>Now the question is how does this config deal with the GRUB2 upgrade. First,
don&#8217;t miss the official <a href="http://frugalware.org/docs/upgrade">upgrade howto</a>, it
covers most cases. What I want to detail here is how did I avoid starting from
scratch and creating a proper partition table using fdisk.</p></div>
<div class="paragraph"><p>Here are the steps I needed:</p></div>
<div class="ulist"><ul>
<li>
<p>
Backup. Yes, I did screw up for the first time, so it&#8217;s really needed.
</p>
</li>
<li>
<p>
Resize parts of the / RAID1 (/dev/sda1 and /dev/sdb1) with gparted livecd (resizing ext3 from cmdline parted didn&#8217;t work for me).
</p>
</li>
<li>
<p>
mdadm re-creation as described in the upgrade howto, from fw install cd, so you&#8217;ll have the required 1.0 metadata.
</p>
</li>
<li>
<p>
Reinstall GRUB1 to sda and sdb, since the physical location of GRUB1&#8217;s stage* changed.
</p>
</li>
<li>
<p>
Boot back to 1.6, run <code>pacman-g2 -Syu</code>, and <code>grub-install</code>&#8201;&#8212;&#8201;again, see the upgrade howto for details.
</p>
</li>
<li>
<p>
Now given that serial console needs a custom GRUB config and kernel parameters, you need to modify GRUB2&#8217;s <code>/etc/default/grub</code>. Here is my diff:
</p>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>/etc/default# diff -u grub.orig grub
<span style="color: #FF6600">--- grub.orig   2012-07-19 01:57:20.000000000 +0200</span>
<span style="color: #009900">+++ grub        2012-07-29 14:45:50.000000000 +0200</span>
<span style="color: #0000FF">@@ -1,11 +1,12 @@</span>
 GRUB_DEFAULT=0
 GRUB_TIMEOUT=5
 GRUB_DISTRIBUTOR="Frugalware 1.6"
<span style="color: #FF6600">-GRUB_CMDLINE_LINUX_DEFAULT="quiet splash"</span>
<span style="color: #009900">+GRUB_CMDLINE_LINUX_DEFAULT="vga=normal nomodeset plymouth.enable=0 console=ttyS0,115200"</span>
 GRUB_CMDLINE_LINUX=""
 GRUB_PRELOAD_MODULES=""
<span style="color: #FF6600">-GRUB_TERMINAL_INPUT=console</span>
<span style="color: #FF6600">-GRUB_TERMINAL_OUTPUT=gfxterm</span>
<span style="color: #009900">+GRUB_TERMINAL_INPUT=serial</span>
<span style="color: #009900">+GRUB_SERIAL_COMMAND="serial --speed=115200 --port=0x3f8"</span>
<span style="color: #009900">+GRUB_TERMINAL_OUTPUT=serial</span>
 #GRUB_GFXPAYLOAD_LINUX=keep
 GRUB_GFXMODE=auto
 #GRUB_DISABLE_LINUX_UUID=true</tt></pre></div></div>
<div class="paragraph"><p>(Refer to <a href="https://vmiklos.hu/blog/amtterm.html">this post</a> if you don&#8217;t know the needed port number.)</p></div>
</li>
<li>
<p>
Finally run <code>grub-mkconfig</code> to create the real config from the just modified default settings.
</p>
</li>
<li>
<p>
Reboot, and GRUB2, the boot process and the login prompt should be accessible over the serial console again.
</p>
</li>
</ul></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/eletrevalok.html">Életrevalók</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Sun 22 July 2012</p>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 1 minutes</p>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="imageblock" style="text-align:center;">
<div class="content">
<a class="image" href="/pic/eletrevalok.jpg">
<img src="/pic/eletrevalok.t.jpg" alt="/pic/eletrevalok.t.jpg" />
</a>
</div>
</div>
<div class="paragraph"><p>LGee <a href="https://sites.google.com/site/rhdisk0/news/eletrevalokintouchables">ajánlása</a> nyomán, nekünk is tetszett.</p></div>
<div class="paragraph"><p>(<a href="http://www.imdb.com/title/tt1675434/">imdb</a>, <a href="http://www.youtube.com/watch?v=hsPHXVnt27g">trailer</a>)</p></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/its-a-wonderful-life.html">It's a Wonderful Life</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Sun 01 July 2012</p>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 1 minutes</p>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="imageblock" style="text-align:center;">
<div class="content">
<a class="image" href="/pic/its-a-wonderful-life.jpg">
<img src="/pic/its-a-wonderful-life.t.jpg" alt="/pic/its-a-wonderful-life.t.jpg" />
</a>
</div>
</div>
<div class="paragraph"><p>Nem is találhattam volna időszerűtlenebb pillanatot a kánikula közepén…&#8201;&#8212;&#8201;szóval ha valakinek melege van es téli filmet akar nézni, ezt csak ajánlani
tudom, valamikor karácsony környékén láttuk, aztán elfelejtettem róla írni.</p></div>
<div class="paragraph"><p>(<a href="http://www.imdb.com/title/tt0038650/">imdb</a>, <a href="http://www.youtube.com/watch?v=O4ne13Zft9Q">trailer</a>)</p></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/muzeumok-ejszakaja-2012.html">Múzeumok éjszakája 2012</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Sun 17 June 2012</p>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 2 minutes</p>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>Úgy tűnik erről a témáról 2009-ben <a href="https://vmiklos.hu/blog/muzeumok-ejszakaja-2009.html">írtam
utoljára</a>, pedig a közbelső években is lelkes résztvevői voltunk ennek a
programnak.</p></div>
<div class="paragraph"><p>Idén először a Rádió- és Televíziótörténeti Múzeumban jártunk, ahol a kiállítás
végén egy csomó régebbi DVD-t is kiraktak. Megakadt egy szemem egy ismerősön:</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<a class="image" href="https://lh3.googleusercontent.com/-HeebdQcLiEY/T9z-DmsQl2I/AAAAAAAABZg/A52m-KJRr0o/I/2012-06-16%25252020.05.45.jpg">
<img src="https://lh3.googleusercontent.com/-HeebdQcLiEY/T9z-DmsQl2I/AAAAAAAABZg/8vEU8Tx_V-U/s640/2012-06-16%252020.05.45.jpg" alt="https://lh3.googleusercontent.com/-HeebdQcLiEY/T9z-DmsQl2I/AAAAAAAABZg/8vEU8Tx_V-U/s640/2012-06-16%252020.05.45.jpg" />
</a>
</div>
</div>
<div class="paragraph"><p>LGee blogjában volt már róla ajánló, a film nekünk is tetszett. Ez után áttértünk a BKV időszakos kiállítására, ahol retróplakátokban gyönyörködhetett a néző (bár ez elmenne egy korabeli demotivátornak is):</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<a class="image" href="https://lh6.googleusercontent.com/-asqo29snIF8/T9z-IwwaF8I/AAAAAAAABZo/ek25xxg5_Z4/I/2012-06-16%25252020.36.34.jpg">
<img src="https://lh6.googleusercontent.com/-asqo29snIF8/T9z-IwwaF8I/AAAAAAAABZo/Y9nhvXxh35o/s640/2012-06-16%252020.36.34.jpg" alt="https://lh6.googleusercontent.com/-asqo29snIF8/T9z-IwwaF8I/AAAAAAAABZo/Y9nhvXxh35o/s640/2012-06-16%252020.36.34.jpg" />
</a>
</div>
</div>
<div class="paragraph"><p>Következő célpontunk a Bodies2 kiállítás lett volna, de ide horribilisan hosszú sor állt, konkrétan mi a Trófea étteremig követtük a helyzetet:</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<a class="image" href="https://lh5.googleusercontent.com/-26Jc12WygO8/T9z-OvPGEZI/AAAAAAAABZw/bwkBPM-_lB8/I/2012-06-16%25252020.58.21.jpg">
<img src="https://lh5.googleusercontent.com/-26Jc12WygO8/T9z-OvPGEZI/AAAAAAAABZw/xU1htxKXH_I/s640/2012-06-16%252020.58.21.jpg" alt="https://lh5.googleusercontent.com/-26Jc12WygO8/T9z-OvPGEZI/AAAAAAAABZw/xU1htxKXH_I/s640/2012-06-16%252020.58.21.jpg" />
</a>
</div>
</div>
<div class="paragraph"><p>és hozzá kell tenni, hogy ráadásul még nem is haladt a sor különösebben. Elkeseredésünket az dobta fel, hogy az Hősök terén mindenféle gyümölcsös Sopronikat osztogattak:</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<a class="image" href="https://lh4.googleusercontent.com/-TZhUnRUP-Ww/T9z-S99ARQI/AAAAAAAABZ4/-1WjYbNTVPE/I/2012-06-16%25252021.25.07.jpg">
<img src="https://lh4.googleusercontent.com/-TZhUnRUP-Ww/T9z-S99ARQI/AAAAAAAABZ4/nk5JxzE8iuM/s640/2012-06-16%252021.25.07.jpg" alt="https://lh4.googleusercontent.com/-TZhUnRUP-Ww/T9z-S99ARQI/AAAAAAAABZ4/nk5JxzE8iuM/s640/2012-06-16%252021.25.07.jpg" />
</a>
</div>
</div>
<div class="paragraph"><p>Sör íze persze nem volt (keserű legalábbis), de amúgy szénsavas gyümölcslé kategóriában finom volt. Innen a Fővárosi Nagycirkusz felé vettük az irányt, ahol éppen egy olasz bohóc-család (értsd: generációk óta a család ezzel foglalkozik) produkálta magát:</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<a class="image" href="https://lh4.googleusercontent.com/-FaAaEPUGuMs/T9z-XJqP4tI/AAAAAAAABaA/f7WHA9yip-w/I/2012-06-16%25252021.37.28.jpg">
<img src="https://lh4.googleusercontent.com/-FaAaEPUGuMs/T9z-XJqP4tI/AAAAAAAABaA/b5oFQ9MgjX8/s912/2012-06-16%252021.37.28.jpg" alt="https://lh4.googleusercontent.com/-FaAaEPUGuMs/T9z-XJqP4tI/AAAAAAAABaA/b5oFQ9MgjX8/s912/2012-06-16%252021.37.28.jpg" />
</a>
</div>
</div>
<div class="paragraph"><p>A produkciójuk végén volt Q&amp;A is, bár érdekes, hogy nem sikerült tolmácsot találni, így a magyar kérdéseket angolra fordították nekik. További érdekesség a cirkusz server roomja:</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<a class="image" href="https://lh4.googleusercontent.com/-MxerDwrmsx8/T9z-banmPAI/AAAAAAAABaI/ythwxtNxXjk/I/2012-06-16%25252021.50.30.jpg">
<img src="https://lh4.googleusercontent.com/-MxerDwrmsx8/T9z-banmPAI/AAAAAAAABaI/dQTpsolmt4I/s640/2012-06-16%252021.50.30.jpg" alt="https://lh4.googleusercontent.com/-MxerDwrmsx8/T9z-banmPAI/AAAAAAAABaI/dQTpsolmt4I/s640/2012-06-16%252021.50.30.jpg" />
</a>
</div>
</div>
<div class="paragraph"><p>Jobb nem elképzelni, miket hostolnak a porond alatt. ;-) A cirkusz tömény popcorn-szagát megelégelve végül a Renrőrmúzeumba érkeztünk, ahol többek között "ilyen volt, ilyen lett" jeligére állítottak ki fénykép-párokat, pl. ezt a jetskit:</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<a class="image" href="https://lh4.googleusercontent.com/-N1cuEhhxVEQ/T9z-jIdnyjI/AAAAAAAABaY/7LJZQVoH9Mk/I/2012-06-16%25252022.49.34.jpg">
<img src="https://lh4.googleusercontent.com/-N1cuEhhxVEQ/T9z-jIdnyjI/AAAAAAAABaY/nFpgH4eVRZo/s640/2012-06-16%252022.49.34.jpg" alt="https://lh4.googleusercontent.com/-N1cuEhhxVEQ/T9z-jIdnyjI/AAAAAAAABaY/nFpgH4eVRZo/s640/2012-06-16%252022.49.34.jpg" />
</a>
</div>
</div>
<div class="paragraph"><p>Zárásképpen pedig egy kép, ami hűen bizonyítja, hogy a bullshittel teletűzdelni valami fontos szöveget bizony nem kapitalista találmány:</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<a class="image" href="https://lh4.googleusercontent.com/-EbnzcgUHkG8/T9z-npn5F2I/AAAAAAAABag/I0c21BjrBPE/I/2012-06-16%25252022.55.08.jpg">
<img src="https://lh4.googleusercontent.com/-EbnzcgUHkG8/T9z-npn5F2I/AAAAAAAABag/quYxOUGDKaA/s640/2012-06-16%252022.55.08.jpg" alt="https://lh4.googleusercontent.com/-EbnzcgUHkG8/T9z-npn5F2I/AAAAAAAABag/quYxOUGDKaA/s640/2012-06-16%252022.55.08.jpg" />
</a>
</div>
</div>
<div class="paragraph"><p>Csak így egyet kiemelve: mióta szokás bármilyen harcossá nevelni egy rendőrt? :-)</p></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/exif-date-sort.html">Sorting photos by date using exif date info</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Mon 11 June 2012</p>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 2 minutes</p>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>For a family event I received photos from about 6 persons, and wanted to view
all of them, sorted by date. The problem was that the timestamps of the files
were sometimes incorrect, and also in all but one cases the exif timestamp was
incorrect as well (but at least that was consistently incorrect, e.g. all
behind of time by 20 mins, etc.)</p></div>
<div class="paragraph"><p>So first I searched for a photo where a clock is shown, then matched photos by
different authors showing the same action to know the time delta of each
camera. The rest can be scripted: just read the exif info, apply the necessary
time correction based on the camera model, and touch the file with the correct
date. Then any image viewer can show the photos, sorted by date.</p></div>
<div class="paragraph"><p>Here is the script I came up with:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">for</span></span> i <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> <span style="color: #990000">*.</span>jpg
<span style="font-weight: bold"><span style="color: #0000FF">do</span></span>
    <span style="font-style: italic"><span style="color: #9A1900"># 2012:01:01 01:01:01 -&gt; 2012-01-01 01:01:01</span></span>
    <span style="color: #009900">date</span><span style="color: #990000">=</span><span style="color: #009900">$(</span>exiv2 <span style="color: #009900">$i</span> <span style="color: #990000">|</span>grep timestamp<span style="color: #990000">|</span>sed <span style="color: #FF0000">'s/.* : //'</span><span style="color: #990000">|</span>sed <span style="color: #FF0000">'s/^</span><span style="color: #CC33CC">\(</span><span style="color: #FF0000">[0-9][0-9][0-9][0-9]</span><span style="color: #CC33CC">\)</span><span style="color: #FF0000">:</span><span style="color: #CC33CC">\(</span><span style="color: #FF0000">[0-9][0-9]</span><span style="color: #CC33CC">\)</span><span style="color: #FF0000">:</span><span style="color: #CC33CC">\(</span><span style="color: #FF0000">[0-9][0-9]</span><span style="color: #CC33CC">\)</span><span style="color: #FF0000">/</span><span style="color: #CC33CC">\1</span><span style="color: #FF0000">-</span><span style="color: #CC33CC">\2</span><span style="color: #FF0000">-</span><span style="color: #CC33CC">\3</span><span style="color: #FF0000">/'</span><span style="color: #990000">)</span>
    <span style="font-style: italic"><span style="color: #9A1900"># date string -&gt; epoch</span></span>
    <span style="color: #009900">unix</span><span style="color: #990000">=</span><span style="color: #009900">$(</span>date --date<span style="color: #990000">=</span><span style="color: #FF0000">"$date"</span> <span style="color: #990000">+%</span>s<span style="color: #990000">)</span>

    <span style="color: #009900">model</span><span style="color: #990000">=</span><span style="color: #009900">$(</span>exiv2 <span style="color: #009900">$i</span> <span style="color: #990000">|</span>grep model<span style="color: #990000">|</span>sed <span style="color: #FF0000">'s/.*: //'</span><span style="color: #990000">)</span>

    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">[</span> <span style="color: #FF0000">"$model"</span> <span style="color: #990000">==</span> <span style="color: #FF0000">"NIKON D40"</span> <span style="color: #990000">];</span> <span style="font-weight: bold"><span style="color: #0000FF">then</span></span>
        <span style="color: #009900">unix</span><span style="color: #990000">=</span><span style="color: #009900">$(($unix-1320))</span> <span style="font-style: italic"><span style="color: #9A1900"># Alice</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
        <span style="color: #009900">unix</span><span style="color: #990000">=</span><span style="color: #009900">$(($unix+3600))</span> <span style="font-style: italic"><span style="color: #9A1900"># Bob</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">fi</span></span>

    <span style="font-style: italic"><span style="color: #9A1900"># epoch -&gt; date string</span></span>
    <span style="color: #009900">date</span><span style="color: #990000">=</span><span style="color: #009900">$(</span>python -c <span style="color: #FF0000">"import time; print time.strftime('%Y-%m-%d %H:%M:%S', time.localtime($unix))"</span><span style="color: #990000">)</span>
    <span style="font-style: italic"><span style="color: #9A1900"># profit!</span></span>
    touch --date<span style="color: #990000">=</span><span style="color: #FF0000">"$date"</span> <span style="color: #009900">$i</span>
<span style="font-weight: bold"><span style="color: #0000FF">done</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># write back the timestamps to the exif info (thx boobaa)</span></span>
jhead -dsft <span style="color: #990000">*.</span>jpg</tt></pre></div></div>
<div class="paragraph"><p>And additionally if you don&#8217;t want to mess up the settings of the image viewer, you can use:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>c=0; for i in $(ls -lhtr *.jpg|sed 's/.* //'); do c=$((c+1)); cp -a $i new/$(printf "%03d" $c).jpg; done</code></pre>
</div></div>
<div class="paragraph"><p>to order filenames based on the file timestamp.</p></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/git-notes-merge.html">Merging git notes</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Thu 07 June 2012</p>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 2 minutes</p>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>The <code>git notes</code> command is really about local annotation of commits&#8201;&#8212;&#8201;nothing
to share. If you decide to still do so, for example the
<a href="http://git-scm.com/2010/08/25/notes.html">git-scm.com</a> HOWTO can show you how to
pull and push them. But what about merging?  There is no UI for that, but&#8201;&#8212;&#8201;given that with git, everything is possible&#8201;&#8212;&#8201;you can still do so manually.</p></div>
<div class="paragraph"><p>So the problem comes when Alice fetches notes, Bob does so, Alice pushes her
notes back, Bob annotates a different commit and when Bob wants to push, he
gets <code>rejected, non-fast-forward</code>. Normally you would merge or rebase in this
situation, but given that <code>git notes</code> by default updates the
<code>refs/notes/commits</code> ref and you typically have a different branch checked out,
you can&#8217;t use <code>git merge</code> or <code>git rebase</code> directly.</p></div>
<div class="paragraph"><p>What works is:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>git checkout refs/notes/commits
git fetch origin refs/notes/commits
git merge FETCH_HEAD
git update-ref refs/notes/commits HEAD
git checkout master</code></pre>
</div></div>
<div class="colist arabic"><ol>
<li>
<p>
Check out the notes, so if you have conflicts, you can resolve them.
</p>
</li>
<li>
<p>
Fetch remote notes to FETCH_HEAD.
</p>
</li>
<li>
<p>
Do the merge.
</p>
</li>
<li>
<p>
Necessary, as <code>git merge</code> won&#8217;t update the ref automatically, since we&#8217;re not on a branch.
</p>
</li>
<li>
<p>
Or whereever you were before.
</p>
</li>
</ol></div>
<div class="paragraph"><p>And now you can push your notes, as detailed in the above referred blog post.
Yes, rebasing would be possible as well, that&#8217;s left as an exercise for the
reader. ;-)</p></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/lo-smartart-sw.html">LibreOffice can now import SmartArt in Writer</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Wed 06 June 2012</p>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 1 minutes</p>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>You may remember that LibreOffice 3.5 learned to
<a href="http://wiki.documentfoundation.org/ReleaseNotes/3.5#Impress_.2F_Draw">import
SmartArt</a> in Impress. In LibreOffice 3.6, the same is now true for Writer:</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<a class="image" href="https://wiki.documentfoundation.org/File:Smartart-sw.png">
<img src="https://wiki.documentfoundation.org/images/thumb/5/56/Smartart-sw.png/448px-Smartart-sw.png" alt="https://wiki.documentfoundation.org/images/thumb/5/56/Smartart-sw.png/448px-Smartart-sw.png" />
</a>
</div>
</div>
<div class="paragraph"><p>Note that just like in Impress, Writer produces far from perfect result if the
prerendered output of the diagram is not present in the document. In practice,
we can open files produced by Word 2010 just fine, but problems with Word 2007
are expected.</p></div>
<div class="paragraph"><p>In case you way to play with this feature, a test document is
<a href="http://cgit.freedesktop.org/libreoffice/core/plain/sw/qa/extras/ooxmltok/data/smartart.docx">available</a>.</p></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/balaton-maraton.html">Balaton Maraton 2012</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Sun 03 June 2012</p>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 1 minutes</p>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>Tegnap voltunk idén is a Balaton Maratonon (Tour de Pelso rendezvény
keretében). A táv meglepő módon megegyezik a
<a href="https://vmiklos.hu/blog/balaton-maraton-2011.html">tavalyi</a> értékkel (204 km), GPS log
<a href="http://maps.google.com/?q=http://vmiklos.hu/gps/2012-06-02.kml">erre</a>, hivatalos
eredmények <a href="http://balaton-team.com/index.php/eredmenylista/2012.html">itt</a>.</p></div>
<div class="paragraph"><p>A kmóra ezeket mérte:</p></div>
<div class="ulist"><ul>
<li>
<p>
idő: 9h30m32s
</p>
</li>
<li>
<p>
táv: 220.64 km
</p>
</li>
<li>
<p>
átlag 23.1 km/h
</p>
</li>
<li>
<p>
max 43.5 km/h
</p>
</li>
</ul></div>
</div>
</div>

  </div>
</article>

<footer>
<div id="paginator">
<a href="https://vmiklos.hu/blog/index27.html" class="button_accent">&larr; Older Posts</a>

<a href="https://vmiklos.hu/blog/index25.html" class="button_accent">Newer Posts &rarr;</a>
</div>
</footer>

    <div id="ending_message">
      <p>&copy; Miklos Vajna. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>. Theme by Giulio Fidente on <a href="https://github.com/gfidente/pelican-svbhack" target="_blank">github</a>. </p>
    </div>
  </main>
</body>
</html>