<!DOCTYPE html>
<html lang="en">

<head>
  <!-- ## for client-side less
  <link rel="stylesheet/less" type="text/css" href="https://vmiklos.hu/blog/theme/css/style.less">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js" type="text/javascript"></script>
  -->
  <link rel="stylesheet" type="text/css" href="https://vmiklos.hu/blog/theme/css/style.css">
  <link rel="stylesheet" type="text/css" href="https://vmiklos.hu/blog/theme/css/pygments.css">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Miklos Vajna">
  <meta name="description" content="Posts and writings by Miklos Vajna">

  <link href="https://vmiklos.hu/blog/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="What is Miklos hacking RSS" />


  <title>
    What is Miklos hacking
&ndash; Posts by: Miklos Vajna  </title>

<script type="text/javascript">
  var _paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//analytics.vmiklos.hu/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
</head>

<body>
  <aside>
    <div id="user_meta">
      <h2><a href="https://vmiklos.hu/blog">What is Miklos hacking</a></h2>
      <p></p>
      <ul>
        <li><a href="/" target="_blank">Root</a></li>
        <li><a href="https://planet.documentfoundation.org/" target="_blank">LibreOffice Blogs</a></li>
      </ul>
    </div>
  </aside>

  <main>
    <header>
      <p>
      <a href="https://vmiklos.hu/blog">Index</a> &brvbar; <a href="https://vmiklos.hu/blog/archives.html">Archives</a>
      &brvbar; <a href="https://vmiklos.hu/blog/feeds/all.rss.xml">RSS</a>
&gt; Author: Miklos Vajna
      </p>
    </header>

<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/gammu-1-28-issue.html">gammu-1.28 issue</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Tue 05 October 2010</p>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 1 minutes</p>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<p>I recently upgraded gammu from 1.27 to 1.28 in -current and I noticed that the backup of my phone is now way slower than before. The <a href="http://gitorious.org/gammu/mainline/commit/9e7b902b8b80dd953bf491e494e42865b0f232d5.patch">fix</a> was trivial (already backported to the Frugalware package as well) for the maintainer so it's now fine again.</p><p>Well done, mcihar! :)</p>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/playing-with-libvirt.html">Playing with libvirt</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Sun 03 October 2010</p>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 4 minutes</p>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<p>I've been playing with <a href="http://frugalware.org/packages/14204">libvirt</a> in the last two days. My motivation was that I saw:<ol>
  <li>plain kvm is not that fast</li>
  <li>there is this virtio framework which aims to make it faster</li>
  <li>using virtio directly is hard, better not reinventing the wheel and just try libvirt</li>
</ol></p><p>So if you want to try it yourself, you need to pacman -S libvirt, service libvirtd start. Check /var/log/syslog for error messages, in case it can't find some commands (bridge-utils, dnsmasq, etc.), install them.</p><p>If you want to create a new virtual machine, you need pacman -S virtinst. Then you can use something like:</p><p><code>virt-install --name=syncpkgcd-helicon --arch=x86_64 --vcpus=1 --ram=1024 --os-type=linux --os-variant=virtio26 --connect=qemu:///system --network network=default --cdrom=/virt/iso/frugalware-1.3-i686-net.iso --disk path=/virt/syncpkgcd/syncpkgcd.img,size=40 --accelerate --vnc --noautoconsole --keymap=us</code></p><p>See man virt-isntall for more info about the meaning of the switches. One trick: kvm can't handle the gfxmenu in our grub on the install cd, so you need to disable that. One way to do it is to use <code>vim -b frugalware-1.3-i686-net.iso</code>, search for "menu /boot", and change "gfx" to "#fx". Then you can run virt-install. It'll start the install in the background. The easiest way (for me) to connect to the console is to create an ssh tunnel to the server running the kvm machine (for example ssh -L 5900:localhost:5900 server), then run <code>krdc localhost:0</code> on my own machine.</p><p>Next trick is that you need kernel support to boot from virtio disks (/dev/vda), that's enabled in frugalware-current.git but there were no rebuild yet, so you need to build it yourself for now.</p><p>Once the installation finished, the machine will be shut down. You can use <code>virsh</code> to start it. <a href="http://acidborg.wordpress.com/2010/02/19/how-to-manage-kvm-virtual-machines-using-virsh/">Here</a> is a great summary about virsh subcommands. Something not to forget: if you want to automatically start the machine after the host booted, use <code>virsh autostart $name</code>.</p><p>(You can also do a service libvirt-guests add, that way all guests will be automatically suspended/resumed on shutdown/boot. Just to be clear: if you want the "resume if it was a proper shutdown, start if there was a power cut" feature: you need both init scripts because libvirtd will always start/resume autostart guests, but it will never suspend them on shutdown.)</p><p>If grub hangs after reboot, try creating a small (I used 32MB) separate /boot partition first, that should fix the issue.</p><p><code>virsh shutdown $machine</code> won't work if you don't install acpid and enable it as well, so it's a good idea to do so.</p><p>The last trick: if you want to use the virt-manager gui from your local machine to manage a remote host, it isn't trivial to do so. First, it would try to login via ssh as root, and that's disabled by default. (And why would you enable it?). Also, even if you allow that, it would try to use <code>nc -U</code> which is supported by the openbsd nc only, the gnu nc does not have such a switch. Instead, we can use socat to connect to unix sockets. So I created a wrapper script under ~/bin with the following contents:</p><p><pre>
#!/bin/sh
if [ "$1" == "-U" ]; then
        sudo socat - unix-client:$2
else
        /usr/bin/netcat $@
fi
</pre></p><p>Don't forget to add PATH=what_you_want line to ~/.ssh/environment, and include the full path of ~/bin there. This way you can keep using gnu nc and you can also login as a user to manage your machines, as long as you set up nopasswd sudo for your user for socat.</p><p>Finally a mini-benchmark:</p><p>The SBU of yugo (i686 buildserver, a bit old HW) is 645 seconds, SBU of an i686 guest on helicon (c2q machine with 8g ram) is 264, SBU of the host build on helicon is 76.</p><p>I would call this usable (not right now, but once we sort out the kernel part). Finally something that is free software and is comparable to VMware ESX. :)</p><p>Update: I recently did the same install with 1.4pre1 (which installs -current, so the kernel is 2.6.36), the list of tricks you still need:</p><p><ul>
  <li>separate /boot (haven't tried without)</li>
  <li>edit iso image to get rid of gfxboot (tried, still fails without)</li>
  <li>some problem with grub, you need to manually add "(hd0) /dev/vda" to /boot/grub/device.map, then run grub-install /dev/vda</li>
</ul></p><p>So no more custom kernel, boot from virtio works by default! :)</p>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/anyremote.html">Anyremote</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Sat 02 October 2010</p>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 1 minutes</p>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<p>I've been testing <a href="http://frugalware.org/packages/103074">anyremote</a> during the last week. I'm aware that there is kanyremote and ganyremote available, but I wasn't really interested in those, since they would hide the glory details. :)</p><p>So I decided to give the server mode mode a try and I choosed okular as a test application. My commandline is:</p><p><code>anyremote -s bluetooth:19 -f /usr/share/anyremote/cfg-data/Server-mode/okular.cfg</code></p><p>Once I started the server on my notebook I could choose it in the midlet on my phone in the j2me client and it worked as expected.</p>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/varso.html">Varso</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Sun 26 September 2010</p>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 1 minutes</p>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="https://lh3.googleusercontent.com/TBt--_XDzI2al-xHiA0BnCii_wdVnRCD7xrG7sumtXfQsAIk5mdJWJ3snnr7FGklxVCHGmZhWFP-3zwsvBZJsYfSjV2QMamP8ARbpW3RetaMzBim6wC_jr1mbaEpHRn-9VvCiIbuWg=w640" alt="https://lh3.googleusercontent.com/TBt--_XDzI2al-xHiA0BnCii_wdVnRCD7xrG7sumtXfQsAIk5mdJWJ3snnr7FGklxVCHGmZhWFP-3zwsvBZJsYfSjV2QMamP8ARbpW3RetaMzBim6wC_jr1mbaEpHRn-9VvCiIbuWg=w640" />
</div>
</div>
<div class="paragraph"><p>A multheti SZTAKI-s poznani kiruccanas utolso napjan a varsoi atszallasnal volt 10 szabad orank, igy
bementunk a varosba kicsit korulnezni.</p></div>
<div class="paragraph"><p>Erdekes kiserlet volt, mivel nem volt sok idonk, tobb esetben csak ugy fotoztam, aztan a koordinatak
alapjan kesobb panoramion kerestem vissza, hogy pontosan mi volt az az epulet, pl
<a href="http://maps.google.com/maps?lci=com.panoramio.all&amp;sll=52.244411469,21.009410858&amp;q=52.244411469+21.009410858">itt</a>
igy derult ki, hogy valojaban az "a" szinhaz. ;)</p></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/hp-meztelen-reklam.html">HP meztelen reklam</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Sat 25 September 2010</p>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 1 minutes</p>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="https://lh3.googleusercontent.com/TdMnE51yQjklhXU1rlI2uEIIayCoC8PCjT5VrFm9WeMqQwT0J4DFRZQdmebK3YLaWZp74ay2djAyta2_XjsvXUZYm7Bp8wGI9-tTUpHI4P4pSVzXrvuS0mUADtFwpDrrr46ByZWK-g=w640" alt="https://lh3.googleusercontent.com/TdMnE51yQjklhXU1rlI2uEIIayCoC8PCjT5VrFm9WeMqQwT0J4DFRZQdmebK3YLaWZp74ay2djAyta2_XjsvXUZYm7Bp8wGI9-tTUpHI4P4pSVzXrvuS0mUADtFwpDrrr46ByZWK-g=w640" />
</div>
</div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="https://lh3.googleusercontent.com/1D4Zu4SMyFYdndQVFIBf2db7Z0sgatMMZAVD4oVcjEzmnyY6fUE9hbpywbz2X33LT8pGagSJtiA0ek9YqPGXk_7S5kNAjstQ8HvYMM5H8Sp9p5qVwKHMQlkQRFwSqDgIpB6N5EinzA=w640" alt="https://lh3.googleusercontent.com/1D4Zu4SMyFYdndQVFIBf2db7Z0sgatMMZAVD4oVcjEzmnyY6fUE9hbpywbz2X33LT8pGagSJtiA0ek9YqPGXk_7S5kNAjstQ8HvYMM5H8Sp9p5qVwKHMQlkQRFwSqDgIpB6N5EinzA=w640" />
</div>
</div>
<div class="paragraph"><p>Hewlett Packard, 2010&#8230;</p></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/scripts-used-in-the-python-2-7-rebuild.html">Scripts used in the Python 2.7 rebuild</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Fri 24 September 2010</p>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 1 minutes</p>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<p>First, I could almost reuse the same set of scripts as described <a href="/blog/scripts-used-in-the-python-2-6-mass-rebu">here</a>. The only change I needed to do is that aborting the build loop after each fail is a waste of time, so now I did:</p><p><pre>
for i in $(cat ~/test.list)
do
        echo $i
        cd ~/git/python27/source/*/$i || continue
        sudo makepkg -t python27,current -C
        git clean -x -d -f
        git checkout -f
        sed -i 's|python>=2.6|python>=2.7|g' FrugalBuild
        if bumppkg -t python27,current --rebuild "- rebuilt with python-2.7"; then
                repoman -t python27 -k push
        else
                echo $i >> ~/failed.list
        fi
done
</pre></p><p>Then investigated the failed builds manually.</p><p>Oh, and obviously I no longer had to build the x86_64/ppc fpms manually, I just enabled syncpkgd for the python27 WIP repo.</p>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/poznan.html">Poznan</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Tue 21 September 2010</p>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 1 minutes</p>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="https://lh3.googleusercontent.com/iyUVQMKjV6kePoBUeeSyeyzJnQ5GKn4frX2rlv0mhAUAtOma4SM4NykNkt69APyjerdd1qcRqVlLGZZ_mOmmqpzXznWIKAjCO2tPqArny1OTDCRPFyjV7e7NLK5-JYPISrRrZLtNuw=w640" alt="https://lh3.googleusercontent.com/iyUVQMKjV6kePoBUeeSyeyzJnQ5GKn4frX2rlv0mhAUAtOma4SM4NykNkt69APyjerdd1qcRqVlLGZZ_mOmmqpzXznWIKAjCO2tPqArny1OTDCRPFyjV7e7NLK5-JYPISrRrZLtNuw=w640" />
</div>
</div>
<div class="paragraph"><p>Mult heten a SZTAKI jovoltabol resztvehettem a <a href="http://summer.kie.ae.poznan.pl/">Summer School Service
Science 2010</a> rendezvenyen.</p></div>
<div class="paragraph"><p>Par cim ami felgyult:</p></div>
<div class="ulist"><ul>
<li>
<p>
Egyetem: ul. Powstańców Wielkopolskich 16, Poznań, Poland
</p>
</li>
<li>
<p>
Szallas: ul. Dożynkowa 9 D, Poznań, Poland
</p>
</li>
<li>
<p>
Repuloter: Poznań-Ławica Airport, Bukowska, Poznań, Poland
</p>
</li>
</ul></div>
<div class="paragraph"><p>Par kep <a href="https://www.flickr.com/photos/vmiklos/albums/72157670298014750">itt</a>.</p></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/next-rtf-fix-tables-at-the-start-of-a-document-1.html">Next RTF fix: tables at the start of a document</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Fri 10 September 2010</p>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 1 minutes</p>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
This was almost two days ago, but... So I got the next problem report from OS, where he attached a sample document which had a table at the beginning. The document text was exported but no the table structure. (So if you had at least one line of text before the table, the bug was not there, that's how I did not notice it.) The <a href="http://hg.services.openoffice.org/cws/vmiklos01/rev/d6b973424417">one-liner</a> fix is now in the CWS and it's <a href="http://cgit.freedesktop.org/ooo-build/ooo-build/commit/?id=eb004f62b0a4507b9cb9a6b66a0721e46d0baefb">backported</a> to ooo-build master as usual.
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/four-rtffilter-fixes.html">Four RtfFilter fixes</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Sat 04 September 2010</p>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 1 minutes</p>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<p>During the week I got some feedback from Oliver Specht on my GSoC work. I decided to dedicate a whole day to address those issues (these were all regressions compared to the old RTF exporter). Here are the results:</p><p><ul>
  <li>Numbering indentations were problematic, this is now <a href="http://hg.services.openoffice.org/cws/vmiklos01/rev/697e294cb900">fixed</a>.</li>
  <li>Outline numbering was missing, <a href="http://hg.services.openoffice.org/cws/vmiklos01/rev/9f6a7c44c7d8">fixed</a> as well.</li>
  <li>Explicit character style support was missing, I now <a href="http://hg.services.openoffice.org/cws/vmiklos01/rev/d37003e71907">implemented</a> it.</li>
  <li>Finally (which was the most time-consuming), text frames were now exported, this is now <a href="http://hg.services.openoffice.org/cws/vmiklos01/rev/b935ac15ff37">implemented</a>, too.</li>
</ul></p><p>One remaining question is that he mentioned something is problematic with the table of contents export, but I could not reproduce the bug so far.</p>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/titanic.html">Titanic</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Sun 29 August 2010</p>
  </div>
  <div class="article_readtime">
    <p>Estimated read time: 1 minutes</p>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="https://lh3.googleusercontent.com/ekyd-3v5F9azHpBPOVXZTSvaWI8iHbJ2UpzIfy4Vlm7FKssFbGqFwu6kf8Eito8hl8a_E860wQMzAqtBTxAEM9MWHuXWW1D-0lckk1YyoIT-RWXgBzifXgMAeZKQZe9ELmh_1SkjNw=w640" alt="https://lh3.googleusercontent.com/ekyd-3v5F9azHpBPOVXZTSvaWI8iHbJ2UpzIfy4Vlm7FKssFbGqFwu6kf8Eito8hl8a_E860wQMzAqtBTxAEM9MWHuXWW1D-0lckk1YyoIT-RWXgBzifXgMAeZKQZe9ELmh_1SkjNw=w640" />
</div>
</div>
<div class="paragraph"><p>Mert mar annyian kerdeztek, hogy "es azt te nem is lattad?" - hat megneztem. Tetszett.</p></div>
<div class="paragraph"><p>(<a href="http://www.imdb.com/title/tt0120338/">imdb</a>, <a href="http://www.youtube.com/watch?v=zCy5WQ9S4c0">trailer</a>)</p></div>
</div>
</div>

  </div>
</article>

<footer>
<div id="paginator">
<a href="https://vmiklos.hu/blog/author/miklos-vajna36.html" class="button_accent">&larr; Older Posts</a>

<a href="https://vmiklos.hu/blog/author/miklos-vajna34.html" class="button_accent">Newer Posts &rarr;</a>
</div>
</footer>

    <div id="ending_message">
      <p>&copy; Miklos Vajna. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>. Theme by Giulio Fidente on <a href="https://github.com/gfidente/pelican-svbhack" target="_blank">github</a>. </p>
    </div>
  </main>
</body>
</html>