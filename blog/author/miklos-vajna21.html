<!DOCTYPE html>
<html lang="en">

<head>
  <!-- ## for client-side less
  <link rel="stylesheet/less" type="text/css" href="https://vmiklos.hu/blog/theme/css/style.less">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js" type="text/javascript"></script>
  -->
  <link rel="stylesheet" type="text/css" href="https://vmiklos.hu/blog/theme/css/style.css">
  <link rel="stylesheet" type="text/css" href="https://vmiklos.hu/blog/theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=PT+Sans|PT+Serif|PT+Mono">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Miklos Vajna">
  <meta name="description" content="Posts and writings by Miklos Vajna">

  <link href="https://vmiklos.hu/blog/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="What is Miklos hacking RSS" />


  <title>
    What is Miklos hacking
&ndash; Posts by: Miklos Vajna  </title>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24726997-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>

<body>
  <aside>
    <div id="user_meta">
      <!--<a href="https://vmiklos.hu/blog">
        <img src="https://vmiklos.hu/blog/theme/images/logo.png" alt="logo">
      </a>-->
      <h2><a href="https://vmiklos.hu/blog">What is Miklos hacking</a></h2>
      <p></p>
      <ul>
        <li><a href="/" target="_blank">Root</a></li>
        <li><a href="https://planet.documentfoundation.org/" target="_blank">LibreOffice Blogs</a></li>
      </ul>
    </div>
  </aside>

  <main>
    <header>
      <p>
      <a href="https://vmiklos.hu/blog">Index</a> &brvbar; <a href="https://vmiklos.hu/blog/archives.html">Archives</a>
      &brvbar; <a href="https://vmiklos.hu/blog/feeds/all.rss.xml">RSS</a>
&gt; Author: Miklos Vajna
      </p>
    </header>

<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/lca-2012-videos.html">LCA 2012 Videos</a></h1>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>I think last year it was the
<a href="http://0pointer.de/blog/projects/lca2011-video.html">systemd video</a> I watched,
now it was btrfs. Especially the
"<a href="http://www.youtube.com/watch?v=hxWuaozpe2I#t=16m50s">can&#8217;t you do online
corruptions?</a>" part. ;)</p></div>
<div class="paragraph"><p>Also: did you know the <code>filefrag</code> and <code>sum</code> commands? (e2fsprogs, coreutils)</p></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/corageous.html">Corageous</a></h1>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="imageblock" style="text-align:center;">
<div class="content">
<a class="image" href="/pic/corageous.png">
<img src="/pic/corageous.t.png" alt="/pic/corageous.t.png" />
</a>
</div>
</div>
<div class="paragraph"><p>Alex Kendrick tavalyi filmje. Ugy latszik nem csak Clint Eastwood szeret
foszerepet jatszani a sajat filmjeiben. ;) Kifejezetten tetszett, csak ajanlani
tudom.</p></div>
<div class="paragraph"><p>(<a href="http://www.imdb.com/title/tt1630036/">imdb</a>, <a href="http://www.youtube.com/watch?v=i9VT_NBIVfs">trailer</a>)</p></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/watchmen.html">Watchmen</a></h1>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="/pic/watchmen.t.jpg" alt="/pic/watchmen.t.jpg" />
</div>
</div>
<div class="paragraph"><p>Csak eros idegzetueknek, de amugy van benne nehany magvas gondolat, erdemes.</p></div>
<div class="paragraph"><p>(<a href="http://www.imdb.com/title/tt0409459/">imdb</a>, <a href="http://www.youtube.com/watch?v=R3orQKBxiEg">trailer</a>)</p></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/mtd-utils.html">mtd-utils</a></h1>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>Quick node about this useful project I packaged two days ago. It has a
<a href="http://www.linux-mtd.infradead.org/faq/ubi.html">long FAQ</a> - I was interested in
how can one access the builtin nand storage on an arm board using it.</p></div>
<div class="paragraph"><p>First, check your dmesg, you should see something like:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>Creating 3 MTD partitions on "orion_nand":
0x000000000000-0x000000100000 : "u-boot"
0x000000100000-0x000000500000 : "uImage"
0x000000500000-0x000020000000 : "root"</code></pre>
</div></div>
<div class="paragraph"><p>As the names say, the three items here are the bootloader, the kernel and the
root filesystem. To access and mount the last one, you need:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>ubiattach /dev/ubi_ctrl -m 2
mount /dev/ubi0_0 root
... hack hack hack ...
umount root
ubidetach /dev/ubi_ctrl -m 2</code></pre>
</div></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/terdmelegito.html">Bringas terdmelegito</a></h1>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>Karacsonyra kaptam egy par bringas terdmelegitot. Hozzam hasonlo nem-orvosok
szamara ez roviden arra jo, hogy hidegben (kb. 5 Â°C alatt) ne fazzon meg a
terd, ami kesobb terdfajast okoz&#8201;&#8212;&#8201;tehat nyugodtan lehet telen is bringazni,
csak erdemes ilyesmit hordani.</p></div>
<div class="paragraph"><p>Reszletesebb verbalis leiras az utvonalunkrol
<a href="https://sites.google.com/site/rhdisk0/news/evnyitoturaapilisben">erre</a>, terkepes
meg <a href="http://maps.google.com/?q=http://vmiklos.hu/gps/2012-01-02.kml">arra</a>, sot
LGee meg
<a href="https://plus.google.com/photos/116149866021135351983/albums/5693139872138319825">kepeket</a>
is rakott fel.</p></div>
<div class="paragraph"><p>A kmora ezeket merte: ido 6h22m31s, tav 96.33km, max 33.3 kmph (jol lathato,
hogy tul gyorsan sehol se mentunk, nem vicces dolog 50-nel rafutni egy jeges
szakaszra).</p></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/frugalware-arm-install-howto.html">Frugalware arm port install HOWTO</a></h1>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>I recently got a <a href="http://en.wikipedia.org/wiki/GuruPlug">GuruPlug</a>. It has Debian
by default, and it&#8217;s apt config is set to <code>stable</code>, while in fact at the moment
what&#8217;s the factory default is considered as <code>oldstable</code> by upstream. So if you
blindly do a few <code>apt-get install foo</code>, soon you&#8217;ll have newer userspace than
kernel, and your device will no longer boot (based on true story - and yes,
this is not Debian&#8217;s fault). Moreover, I was interested in how to install
Frugalware on this device, so here is a quick howto.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_install_rootfs">Install rootfs</h2>
<div class="sectionbody">
<div class="paragraph"><p>First you need to bootstrap Frugalware from Debian. It&#8217;s a good idea to install
Frugalware on a USB stick, so you can switch back to Debian in case you messed
up something and start from scratch again.</p></div>
<div class="paragraph"><p>Partitioning is up to you, you&#8217;re recommended to have a small FAT (type: <code>0x0b</code>)
partition (32MB for example) at the beginning, we&#8217;ll use that later. The second
can be the rest, ext4 or so.</p></div>
<div class="paragraph"><p>Format and mount it (your device name may differ!):</p></div>
<div class="listingblock">
<div class="content">
<pre><code>mkfs.ext4 /dev/sda2
mkdir -p /mnt/sda2
mount /dev/sda2 /mnt/sda2</code></pre>
</div></div>
<div class="paragraph"><p>Then install our pacman-g2 binary to the Debian system, so you can bootstrap:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>wget http://ftp.frugalware.org/pub/frugalware/frugalware-stable/frugalware-arm/pacman-g2-3.8.3-2mores2-arm.fpm
unxz pacman-g2-3.8.3-2mores2-arm.tar.xz
cd /
tar xf /path/to/pacman-g2-3.8.3-2mores2-arm.tar
rm .CHANGELOG .FILELIST .PKGINFO</code></pre>
</div></div>
<div class="paragraph"><p>Installing the required packages is a single command, as described
<a href="http://frugalware.org/docs/install#_a_manual_bootstrap">here</a>:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>pacman-g2.static --noconfirm -Sy core base -r /mnt/sda2/</code></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_upgrade_the_bootloader">Upgrade the bootloader</h2>
<div class="sectionbody">
<div class="paragraph"><p>Once the rootfs is ready, you need a new bootloader that will be able to boot
our vanilla kernel.</p></div>
<div class="paragraph"><p>You need a <a href="http://www.globalscaletechnologies.com/p-28-guruplug-jtag.aspx">JTAG
Board</a>, so you can access the serial console. If you connect the USB cable to
you PC, you can use for example</p></div>
<div class="listingblock">
<div class="content">
<pre><code>screen /dev/ttyUSB0 115200</code></pre>
</div></div>
<div class="paragraph"><p>to access the device.</p></div>
<div class="paragraph"><p>Given that we want to boot a vanilla kernel, we need a vanilla bootloader as
well. Before you mess with the bootloader, it&#8217;s a good idea to make a backup of
its config (there is a 3 second timeout during boot - if you press any key
there, you get the Marvell prompt). Here is my config:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>Marvell&gt;&gt; printenv
bootcmd=${x_bootcmd_ethernet}; ${x_bootcmd_usb}; ${x_bootcmd_kernel}; setenv bootargs ${x_bootargs} ${x_bootargs_root}; bootm 0x6400000;
bootdelay=3
baudrate=115200
x_bootcmd_ethernet=ping 192.168.2.1
x_bootcmd_usb=usb start
x_bootcmd_kernel=nand read.e 0x6400000 0x100000 0x400000
x_bootargs=console=ttyS0,115200
x_bootargs_root=ubi.mtd=2 root=ubi0:rootfs rootfstype=ubifs
ethact=egiga0
bootargs=console=ttyS0,115200 ubi.mtd=2 root=ubi0:rootfs rootfstype=ubifs
ipaddr=10.10.10.10
serverip=10.10.10.179
ethaddr=F0:AD:4E:00:CE:C3
stdin=serial
stdout=serial
stderr=serial</code></pre>
</div></div>
<div class="paragraph"><p>The only semi-unique part is the MAC address of the network interface(s).</p></div>
<div class="paragraph"><p>If you want to update the bootloader, a possible way is to put the new binary
to a pendrive. Given that the default bootloader does not support ext*, we need
a fat filesystem. So format the first small partition we created already (the
device name may be different in your case!):</p></div>
<div class="listingblock">
<div class="content">
<pre><code>mkdosfs /dev/sda1</code></pre>
</div></div>
<div class="paragraph"><p>Till Frugalware 1.6 is released, support for GuruPlug is available in
Frugalware -current only, so download the
<a href="http://ftp.frugalware.org/pub/frugalware/frugalware-current/frugalware-arm/u-boot-2011.12-2-arm.fpm">binary
package</a> from there, extract the u-boot.kwb file from the guruplug directory,
put it to the new partition. (A few other models are explained
<a href="http://www.cyrius.com/debian/kirkwood/sheevaplug/uboot-upgrade.html">here</a>).</p></div>
<div class="paragraph"><p>Before you reboot, copy also <code>/boot/uImage</code> to the fat partition, you may have
problems problems with reading the kernel from the ext4 partition with u-boot.</p></div>
<div class="paragraph"><p>Once copying the kernel is done, reboot and in the u-boot shell do:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>usb start
fatload usb 0:1 0x0800000 u-boot.kwb
nand erase 0x0 0x60000
nand write 0x0800000 0x0 0x60000
reset</code></pre>
</div></div>
<div class="paragraph"><p>You can verify the updated bootloader with the <code>version</code> command:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>Marvell&gt;&gt; version

U-Boot 2011.12 (Jan 03 2012 - 16:55:38)
Marvell-GuruPlug
gcc (Frugalware Linux) 4.6.2
GNU ld (GNU Binutils) 2.22</code></pre>
</div></div>
<div class="paragraph"><p>If Frugalware is mentioned, that&#8217;s a good sign. :)</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_boot_the_new_rootfs">Boot the new rootfs</h2>
<div class="sectionbody">
<div class="paragraph"><p>Now you can boot your new rootfs:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>usb start
fatload usb 0:1 0x00800000 /uImage
setenv bootargs console=ttyS0,115200 root=/dev/sda2 rootdelay=5
bootm 0x00800000</code></pre>
</div></div>
<div class="paragraph"><p>If it booted fine, you may want to make this the default:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>setenv bootargs 'console=ttyS0,115200 root=/dev/sda2 rootdelay=5'
setenv bootcmd_usb 'usb start; fatload usb 0:1 0x00800000 /uImage'
setenv bootcmd 'run bootcmd_usb; bootm 0x00800000'
saveenv</code></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_finalize">Finalize</h2>
<div class="sectionbody">
<div class="paragraph"><p>The rest is up to you:</p></div>
<div class="ulist"><ul>
<li>
<p>
setting up a root password
</p>
</li>
<li>
<p>
setting up network by default using netconfig
</p>
</li>
</ul></div>
<div class="paragraph"><p>and so on&#8230; you know this already, nothing arm-specific.</p></div>
<div class="paragraph"><p>For the reference, here is the tested CPU and Frugalware version:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ cat /proc/cpuinfo
Processor       : Feroceon 88FR131 rev 1 (v5l)
BogoMIPS        : 1191.11
Features        : swp half thumb fastmult edsp
CPU implementer : 0x56
CPU architecture: 5TE
CPU variant     : 0x2
CPU part        : 0x131
CPU revision    : 1

Hardware        : Marvell GuruPlug Reference Board
Revision        : 0000
Serial          : 0000000000000000
$ cat /etc/frugalware-release
Frugalware 1.5 (Mores)</code></pre>
</div></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/szokasos-evvegi-osszefoglalo-2011.html">Szokasos evvegi osszefoglalo 2011</a></h1>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>A <a href="/blog/szokasos-evvegi-osszefoglalo-2010">tavalyit</a> folytatva:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Masodszorra is voltunk januar vegen <a href="/blog/isola-2000">Isolan</a> sielni.
</p>
</li>
<li>
<p>
Februarban tartottuk eljegyzesunk.
</p>
</li>
<li>
<p>
Szakmai utazasok: <a href="http://wiki.documentfoundation.org/Hackfest2011">HackFest</a> Munchenben, <a href="http://wiki.documentfoundation.org/Marketing/SpecialEvents/LibreOffice_Conference_2011_Paris">LibreOffice konferencia</a> Parizsban.
</p>
</li>
<li>
<p>
A nyarat iden is hackelessel toltottem, a tavalyi OpenOffice.org RTF temat folytatva most a LibreOffice-szal.
</p>
</li>
<li>
<p>
Frugalware: az idei ket slager talan a systemd ill. a kernelpatch-mentes livecd volt.
</p>
</li>
<li>
<p>
Nyaron a horvat tengerparon bringaztunk egy hetet.
</p>
</li>
<li>
<p>
A szakmai eloadasok meg mindig gyakoriak, 2011-ben osszesen <a href="https://speakerdeck.com/vmiklos">6 helyen</a> adtam elo.
</p>
</li>
<li>
<p>
Decemberben leadtam az <a href="https://github.com/vmiklos/msc-thesis/downloads">MSc diplomatervem</a>.
</p>
</li>
<li>
<p>
Az immar 4 eves Nokia S40-emet migraltam Androidra.
</p>
</li>
<li>
<p>
Ev vegevel kozos megegyezessel kileptem a SZTAKI-bol (amit amugy meg mindig jo helynek tartok azok szamara akiket erdekel az akademiai szfera).
</p>
</li>
</ol></div>
<div class="paragraph"><p>BUEK!</p></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/galaxy-s.html">Samsung Galaxy S</a></h1>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>As <a href="/blog/s40-apps-i-use">this post</a> already suggested, about a week ago I
replaced <a href="/blog/3110c">my S40</a> with $title. (Yes, I know that S II is
just released, but that pushed down the price of S a bit, and I don&#8217;t want to
waste so much money for a phone.)</p></div>
<div class="paragraph"><p>So far I&#8217;m quite pleased about the product, here are the tools I used to
migrate data:</p></div>
<div class="ulist"><ul>
<li>
<p>
gammu, to convert the calendar to ics, which can be imported by the calendar
</p>
</li>
<li>
<p>
<a href="https://github.com/vmiklos/vmexam/blob/master/gammu/gammu2gcontacts">gammu2gcontacts</a> to extract contacts from the gammu backup (<a href="/blog/gammu2gcontacts">earlier post</a>)
</p>
</li>
<li>
<p>
<a href="http://www.mgmaps.com/">mgmaps</a> can export to kml, which can be imported to my maps
</p>
</li>
<li>
<p>
finally a throw-away (use once, and never look back) script to generate emails from my notes, which can be imported by <a href="https://market.android.com/details?id=org.dayup.gnotes">gnotes</a>
</p>
</li>
</ul></div>
<div class="paragraph"><p>The hardware is supported by <a href="http://www.cyanogenmod.com/">CyanogenMod</a>, but I did not experiment with that so far. (<a href="http://forum.xda-developers.com/showthread.php?t=723596">bookmark</a>)</p></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/recent-contributions.html">Recent contributions</a></h1>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
BitlBee: a patch for skyped got <a href="http://code.bitlbee.org/lh/bitlbee/revision/848">merged</a>, helping to avoid the cryptic openssl error messages when the certificate is missing.
</p>
</li>
<li>
<p>
openSUSE: the mutt package now <a href="https://build.opensuse.org/request/show/93695">contains</a> one more patch from Frugalware&#8217;s mutt-ng package, which means my mutt config can be used unmodified (no more unknown config settings)
</p>
</li>
<li>
<p>
jBPM and bpm-console: these were part of my <a href="https://github.com/vmiklos/msc-thesis/downloads">MSc thesis</a>, github branches <a href="https://github.com/vmiklos/jbpm/tree/5.1.x-thesis">are</a> <a href="https://github.com/vmiklos/bpm-console/tree/thesis">available</a>, upstreaming is <a href="https://github.com/droolsjbpm/jbpm/pull/43">in progress</a> (on IRC they confirmed that they are interested in the feature, at least)
</p>
</li>
</ul></div>
</div>
</div>

  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="https://vmiklos.hu/blog/s40-apps-i-use.html">S40 applications I use</a></h1>
  </div>
  <div class="article_text">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>See <a href="/blog/kde3-apps-i-use">this post</a> for motivation.</p></div>
<div class="ulist"><ul>
<li>
<p>
<a href="http://sourceforge.net/projects/readmaniac/">readmaniac</a> for book reading
</p>
</li>
<li>
<p>
<a href="http://anyremote.sourceforge.net/">anyremote</a> for controlling okular
</p>
</li>
<li>
<p>
<a href="http://www.opera.com/mobile/">opera mini</a> for web browsing (the native browser of the S40s is a joke)
</p>
</li>
<li>
<p>
<a href="http://www.google.com/mobile/mail/">gmail</a> for email reading
</p>
</li>
<li>
<p>
<a href="http://www.mgmaps.com/">mgmaps</a> for offline maps
</p>
</li>
<li>
<p>
<a href="http://www.midpssh.org/">midpssh</a> for ssh access
</p>
</li>
</ul></div>
</div>
</div>

  </div>
</article>

<footer>
<div id="paginator">
<a href="https://vmiklos.hu/blog/author/miklos-vajna22.html" class="button_accent">&larr; Older Posts</a>

<a href="https://vmiklos.hu/blog/author/miklos-vajna20.html" class="button_accent">Newer Posts &rarr;</a>
</div>
</footer>

    <div id="ending_message">
      <p>&copy; Miklos Vajna. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>. Theme by Giulio Fidente on <a href="https://github.com/gfidente/pelican-svbhack" target="_blank">github</a>. </p>
    </div>
  </main>
</body>
</html>