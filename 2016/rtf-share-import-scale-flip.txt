title: RTF shape import: group scaling and flip in LibreOffice Writer
author: Miklos
tags: en, libreoffice
pubdate: 2016-06-27T09:41:34Z
<<<

Some kind of simple logo was
https://bugs.documentfoundation.org/show_bug.cgi?id=91684[reported] to be
mis-imported in the RTF filter, it looked like this:

image::https://farm8.staticflickr.com/7451/27320164444_f437d0418e_o.png[align="center"]

which is interesting, but the reference output is different:

image::https://farm8.staticflickr.com/7317/27898228066_f5918e59bf_o.png[align="center"]

With a bit of investigation, it turns out this was a flipped group shape with
a few rectangles, so the mis-rendering of the logo was due to two independent
problems. The first is that the child shapes inside a group shape were scaled
incorrectly. See the
https://cgit.freedesktop.org/libreoffice/core/commit/?id=c3acc06230169f141930945ebbff43b1a88dfdee[commit]
for the exact details, after fixing scaling, it looked closer to the original:

image::https://farm8.staticflickr.com/7301/27320164424_4ce2ced16c_o.png[align="center"]

The second problem was that the group itself was flipped, and this was again
ignored on import. After
https://cgit.freedesktop.org/libreoffice/core/commit/?id=63965d7dc571c7dce999980737f9d57a7c5151da[fixing]
that problem:

image::https://farm8.staticflickr.com/7228/27898228076_f89fabeb00_o.png[align="center"]

the result is basically the same as the reference. Both fixes are not only on
master (towards LibreOffice 5.3) but also backported to LibreOffice 5.2. :-)

// vim: ft=asciidoc
