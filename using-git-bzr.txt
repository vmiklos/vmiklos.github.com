permalink: using-git-bzr
pubdate: 2008-07-31T23:44:19Z
title: using git-bzr
author: Miklos
tags: en, hacking
<<<
++++
It seems recently one of my favorite topics is 'how to convert from $random SCM to git' ;)

So, I already had a configuration using tailor, but that was slow. I know this already. Tailor is good because it always works, it isn't good because it's fast.

First, you need git-1.6.0rc0 or higher, you can find an fpm in my <a href="http://ftp.frugalware.org/pub/other/people/vmiklos/bmf/frugalware-i686/">bmf repo</a>.

Second, you need the bzr fastimport plugin:

<code>bzr branch lp:bzr-fastimport</code>

Then enable the plugin:

<code>cd ~/.bzr/plugins; ln -s /path/to/bzr-fastimport fastimport</code>

Now you can clone git-bzr itself:

<code>git clone git://github.com/pieter/git-bzr.git</code>

Put it to your PATH:

<code>cd ~/bin; ln -s /path/to/git-bzr/git-bzr .</code>

NOTE: so you should not symlink the dir, but the script inside the dir.

Okay, this is done, now clone (branch in bzr terms) the bzr repo you want to convert. For example:

<code>bzr branch http://code.bitlbee.org/bitlbee/</code>

Finally do the conversion (from the git-bzr README):

<pre>
git bzr add upstream ../bzr-branch
git bzr fetch upstream
git checkout -b local_branch bzr/upstream
: hack hack hack
git bzr push upstream
</pre>

Actually for now I only needed a one-directional convert, so my update-bitlbee.sh now looks like:

<pre>
cd ~/scm/bzr/bitlbee
bzr pull
cd - # so we are again under bitlbee.git, it works in bare repos as well!
git bzr fetch upstream
</pre>

And yes, the resulting trees match perfectly! ;)

(Yes, I plan to package git-bzr and bzr-fastimport but I want to give it a good testing first.)
++++
