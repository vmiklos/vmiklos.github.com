pubdate: 2011-04-01T00:01:48Z
title: KVM vs Windows 2003
author: Miklos
tags: en
<<<
A few days ago I wanted to try out Windows 2003 (to be used for a task
at the university) in KVM, to be exact using libvirt. First I didn't do
any non-intuitive trick, but later it turned out what virtio should be
enabled for the block devices or the whole machine will be slow as hell.
For the records, here is what worked for me:

----
wget http://alt.fedoraproject.org/pub/alt/virtio-win/latest/images/bin/virtio-win-1.1.16.vfd
virt-install --name=vmiklos-w2003 --arch=x86_64 --vcpus=1 --ram=2048 \
	--os-type=windows --os-variant=win2k3 --connect=qemu:///system \
	--network network=default \
	--cdrom=/virt/vmiklos-w2003/en_windows_server_2003_with_sp1_enterprise.iso \
	--disk path=/virt/vmiklos-w2003/vmiklos-w2003.img,size=24,bus=virtio \
	--disk path=/virt/vmiklos-w2003/virtio-win-1.1.16.vfd,device=floppy \
	--accelerate --vnc --noautoconsole --keymap=us
----

When the installer asks if you have a special SCSI driver floppy, ask for it,
then you can select the virtio driver.
