= Bibliography improvements in LibreOffice Writer

:slug: sw-bibliography
:category: libreoffice
:tags: en
:date: 2021-03-24T12:18:17+01:00

The bibliography feature in Writer allows authors of e.g. scientific papers to track sources: first
you can insert bibliography entry fields, then at the end you can generate a bibliography table
automatically.

Writer now has two improvements in this area: more information about these entries in the form of a
mouse tooltip and clickable URLs in the table.

First, thanks https://ulakbim.tubitak.gov.tr/en[TUBITAK ULAKBIM] who made this work by
https://www.collaboraoffice.com/[Collabora] possible.

== Motivation

Generating a bibliography (table) for a document is a two-step process: first the user inserts
bibliography entry fields to refer to sources, then later the bibliography can be auto-generated. It
was not great that details of a source was only visible in the Writer edit window after generating
the bibliography table. A somewhat related shortcoming was that URLs of sources were handled as
plain text, while users expect that references are also clickable, similar to e.g. table of
contents.

== Results so far

This is how a tooltip looks like, available even if there is no bibliography table yet:

.Tooltip for bibliography entry fields
image::https://share.vmiklos.hu/blog/sw-bibliography/tooltip.png[align="center"]

And URLs in the bibliography table are now clickable:

.Clickable URLs in the bibliography table
image::https://share.vmiklos.hu/blog/sw-bibliography/url.png[align="center"]

== How is this implemented?

If you would like to know a bit more about how this works, continue reading... :-)

As usual, the high-level problem was addressed by a series of incremental development steps:

// git log --author=vmiklos --since=2021-01-01 --grep 'bibliography' --pretty=oneline --reverse

- link:$$https://gerrit.libreoffice.org/c/core/+/110705$$[sw tooltip on bibliography fields: add an
  SwTOXInternational factory] and link:$$https://gerrit.libreoffice.org/c/core/+/110712$$[sw tooltip on
  bibliography fields: add a text factory that gives us a string] were necessary refactors to get a
  string that looks like a row in the bibliography table, without having an empty bibliography table
  at hand
- link:$$https://gerrit.libreoffice.org/c/core/+/110765$$[sw tooltip on bibliography fields: add the actual
  tooltip functionality] improved the UI to have a tooltip
- link:$$https://gerrit.libreoffice.org/c/core/+/111117$$[sw bibliography: make URLs in the bibliography
  table clickable] implemented the clickable URLs feature

== Want to start using this?

Collabora intends to continue supporting and contributing to LibreOffice, the code is merged so we
expect all of this work will be available in TDF's
http://dev-builds.libreoffice.org/daily/master/[next release] (7.2).

// vim: ft=asciidoc
