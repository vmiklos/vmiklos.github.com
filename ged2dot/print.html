<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ged2dot user guide</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">User Guide</li><li class="chapter-item expanded "><a href="installation.html"><strong aria-hidden="true">1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="usage.html"><strong aria-hidden="true">2.</strong> Usage</a></li><li class="chapter-item expanded "><a href="hacking.html"><strong aria-hidden="true">3.</strong> Development notes</a></li><li class="chapter-item expanded "><a href="news.html"><strong aria-hidden="true">4.</strong> Changelog</a></li><li class="chapter-item expanded "><a href="contributors.html"><strong aria-hidden="true">5.</strong> Contributors</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">ged2dot user guide</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>ged2dot is a GEDCOM to Graphviz converter.</p>
<p>The latest version is v24.2, released on 2024-02-01.</p>
<h2 id="description"><a class="header" href="#description">Description</a></h2>
<p><code>ged2dot</code> is a script that takes a <a href="http://en.wikipedia.org/wiki/GEDCOM">GEDCOM</a> file and tries to
visualize it using <a href="http://www.graphviz.org/">Graphviz</a>'s <code>dot</code> tool. The basic idea is that you can
map individuals and families to graph nodes and connections between them to graph edges, then <code>dot</code>
takes care of the rest. What's unique about <code>ged2dot</code> is that it allows more than showing ancestors
and descendants of a single individual (what you can easily do with other existing family editor
software).</p>
<p>It looks like this:</p>
<p><img src="https://vmiklos.hu/ged2dot/tests/screenshot.png" alt="screenshot" /></p>
<h2 id="contributing"><a class="header" href="#contributing">Contributing</a></h2>
<p>ged2dot is free and open source. You can find the source code on
<a href="https://github.com/vmiklos/ged2dot">GitHub</a> and issues and feature requests can be posted on
the issue tracker. If you'd like to contribute, please consider opening a pull request.</p>
<h2 id="license"><a class="header" href="#license">License</a></h2>
<p>Use of this source code is governed by a MPL-style license that can be found in
the LICENSE file.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<h2 id="download"><a class="header" href="#download">Download</a></h2>
<p>From <a href="https://github.com/vmiklos/ged2dot">GitHub</a>.</p>
<h2 id="running-the-script-in-place"><a class="header" href="#running-the-script-in-place">Running the script in-place</a></h2>
<p>You can build the code using:</p>
<pre><code class="language-console">./ged2dot.py --help
</code></pre>
<p>You can run the tests using:</p>
<pre><code class="language-console">make check
</code></pre>
<h2 id="qt-based-gui"><a class="header" href="#qt-based-gui">Qt-based GUI</a></h2>
<p>The <code>qged2dot.py</code> script is a Qt-based GUI for <code>ged2dot</code>, which can turn the <code>dot</code> output into PNG
files.</p>
<p>For macOS, the DMG is not signed digitally, so you need to allow its usage
<a href="https://support.apple.com/guide/mac-help/open-a-mac-app-from-an-unidentified-developer-mh40616/mac">explicitly</a>.</p>
<p>The installer bundles Graphviz for macOS and Windows.</p>
<p>The app icon is by <a href="https://icon-icons.com/icon/family-tree/120659">Appzgear</a>.</p>
<h2 id="libreoffice-draw-gedcom-import-filter"><a class="header" href="#libreoffice-draw-gedcom-import-filter">LibreOffice Draw GEDCOM import filter</a></h2>
<p>The <code>libreoffice/</code> subdirectory contains a LibreOffice extension, that
implements a GEDCOM import filter for Draw. Needless to say, it uses <code>ged2dot</code>
internally -- think of it as a GUI for <code>ged2dot</code>, with the additional benefit
that you can hand-edit the resulting layout in Draw, if you want.</p>
<p>Its dependencies:</p>
<ul>
<li>
<p>It uses Graphviz to process the <code>dot</code> format. In case you don't have Graphviz
installed:</p>
<ul>
<li>
<p>For Windows, <a href="https://graphviz.gitlab.io/_pages/Download/Download_windows.html">get it here</a> (2.38 is tested).</p>
</li>
<li>
<p>For Linux, use your package manager to install the <code>graphviz</code> package (2.28 is tested).</p>
</li>
<li>
<p>For macOS, install it from <a href="https://brew.sh/">brew</a> (2.36 is tested).</p>
</li>
</ul>
</li>
<li>
<p>LibreOffice &gt;= 7.2</p>
</li>
</ul>
<p>Features:</p>
<ul>
<li>Filter detection: you can use File -&gt; Open and select a GEDCOM file, and
it'll be opened in Draw automatically.</li>
<li>Import options: On import, a graphical dialog can be used to set a subset of
the options available in a <code>ged2dotrc</code>.</li>
<li>Internally reuses the excellent SVG import filter of LibreOffice, contributed
by Fridrich Strba and Thorsten Behrens, so the result can be manually
fine-tuned if necessary.</li>
<li>Runs on Windows and Linux and macOS.</li>
</ul>
<p>You can grap a release binary at <a href="https://github.com/vmiklos/ged2dot/releases">the releases page</a> --
more on how to to install a LibreOffice extension
<a href="https://wiki.documentfoundation.org/Documentation/HowTo/install_extension">here</a>.</p>
<p>NOTE: Linux distributions install Python support separately, be sure to install the
<code>libreoffice-script-provider-python</code> (deb) or <code>libreoffice-pyuno</code> (rpm) packages before the OXT
file.</p>
<p>Once that's done, you'll see something like this if you open a GEDCOM file:</p>
<p><img src="https://vmiklos.hu/ged2dot/libreoffice/screenshot.png" alt="screenshot" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="usage"><a class="header" href="#usage">Usage</a></h1>
<p>You usually want to customize your input filename, output filenames, the root family and the depth
of the graph visitor. You can provide these either by using command-line arguments (see <code>ged2dot.py --help</code>) or by using a configuration file (see <code>ged2dotrc.sample</code>). When using both, the
command-line arguments overwrite configuration values.</p>
<p>A typical flow looks like this with a provided test input:</p>
<pre><code class="language-console">./ged2dot.py --input tests/happy.ged --output test.dot --rootfamily F1 --familydepth 3
dot -Tsvg -o test.svg test.dot
</code></pre>
<p>At this point you can open test.svg in your web browser and check the result. Mouse tooltips on the
marriage nodes give you family IDs. You can change the familydepth parameter to include less or more
nodes around the root family.</p>
<h2 id="layout"><a class="header" href="#layout">Layout</a></h2>
<p>The layout does a Breadth First Search (BFS) traversal on the graph, from the starting family.</p>
<p>This has several benefits over explicitly trying to guess which family belongs to which generation.
Some example more tricky cases, which are handled by <code>ged2dot</code>:</p>
<ul>
<li>
<p>root family → husband → sister → showing her kids</p>
</li>
<li>
<p>root family → wife → cousin → showing her kid</p>
</li>
<li>
<p>root family → husband → grand father → showing both wives with the matching kids</p>
</li>
<li>
<p>marrying cousins</p>
</li>
</ul>
<p>(ged2dot &lt;= 7.0 allowed multiple layouts, none of them supported the above more tricky cases.)</p>
<p>GEDCOM files don't contain images, but you can put images next to the GEDCOM file, and in that case
ged2dot will try to pick them up when generating <code>dot</code> output. The expected location is
<code>images/Given Family 1234.jpg</code>, relative to the GEDCOM file. For example, there is a person called
Ray Smith in the above screenshot. The birth year string is <code>Y</code>, so the image location has to be
<code>images/Ray Smith Y.jpg</code>.</p>
<h2 id="bugs"><a class="header" href="#bugs">Bugs</a></h2>
<p>For <code>ged2dot</code>, in case a given input results in a runtime crash, it's
considered a bug. If you have a fix for it,
<a href="https://github.com/vmiklos/ged2dot/pull/new/master">pull requests</a> on GitHub are
welcome. Make sure to run <code>make check</code> before submitting your changes.</p>
<p>For the LibreOffice extension, in case you get an error during opening:</p>
<ul>
<li>For Windows, the log file location is something like:</li>
</ul>
<pre><code>C:/Users/John/Application Data/LibreOffice/4/user/Scripts/python/log.txt
</code></pre>
<ul>
<li>
<p>For Linux, start LibreOffice from a terminal, the log is printed to the
standard error.</p>
</li>
<li>
<p>For Mac, start LibreOffice from Terminal:</p>
</li>
</ul>
<pre><code>cd /Applications/LibreOffice.app/Contents/program
./soffice --nologo /path/to/test.ged
</code></pre>
<p>then the log is printed to the standard error as well.</p>
<h2 id="icons"><a class="header" href="#icons">Icons</a></h2>
<p>Icons are from
<a href="http://www.wpzoom.com/wpzoom/new-freebie-wpzoom-developer-icon-set-154-free-icons/">WPZOOM</a>,
in case placeholders have to be used for missing images.</p>
<h2 id="resources"><a class="header" href="#resources">Resources</a></h2>
<ul>
<li><a href="https://www.familysearch.org/developers/docs/guides/gedcom">GEDCOM specification</a></li>
<li><a href="https://gist.github.com/fetsorn/1d5f6cbc47989b32cb461528c1e253b4">Translation of ged2dot to JavaScript</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="development-notes"><a class="header" href="#development-notes">Development notes</a></h1>
<h2 id="how-to-set-up-a-virtual-env"><a class="header" href="#how-to-set-up-a-virtual-env">How to set up a virtual env</a></h2>
<p>Create it:</p>
<pre><code>python3.11 -m venv ged2dot-env
</code></pre>
<p>Activate it:</p>
<pre><code>. ged2dot-env/bin/activate
</code></pre>
<p>Install requirements:</p>
<pre><code>pip install -r requirements.txt
</code></pre>
<h2 id="development-cycle"><a class="header" href="#development-cycle">Development cycle</a></h2>
<p>A typical flow is:</p>
<pre><code>... hack hack hack ...
make check-mypy
ged2dot --input test.ged --output test.dot &amp;&amp; dot -Tsvg -o test.svg test.dot # test the changes
</code></pre>
<p>Once you're happy with your change:</p>
<pre><code>make check # run all tests
... write new tests if coverage regressed ...
</code></pre>
<h2 id="python-debugging"><a class="header" href="#python-debugging">Python debugging</a></h2>
<p>To run a single test:</p>
<pre><code>env PYTHONPATH=.:tests python3 -m unittest tests.test_ged2dot.TestMain.test_happy
</code></pre>
<h2 id="maintenance"><a class="header" href="#maintenance">Maintenance</a></h2>
<p>Ideally CI checks everything before a commit hits master, but here are a few
things which are not part of CI:</p>
<ul>
<li>Run <code>tools/requirements.py</code> once a month and make sure Python dependencies are reasonably up to date.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="version-descriptions"><a class="header" href="#version-descriptions">Version descriptions</a></h1>
<h2 id="242"><a class="header" href="#242">24.2</a></h2>
<ul>
<li>Use ordering=out on family nodes to try to control the order of children nodes</li>
<li>Fix crash on non-existing root family</li>
</ul>
<h2 id="76"><a class="header" href="#76">7.6</a></h2>
<ul>
<li>Fix crash on non-int line start</li>
<li>Fix crash on invalid utf-8 lines</li>
</ul>
<h2 id="75"><a class="header" href="#75">7.5</a></h2>
<ul>
<li>new config option: direction (defaults to <code>both</code>, can be <code>child</code>)</li>
</ul>
<h2 id="74"><a class="header" href="#74">7.4</a></h2>
<ul>
<li>Fail nicer when the specified root family doesn't exist</li>
<li>Document expected image location</li>
</ul>
<h2 id="73"><a class="header" href="#73">7.3</a></h2>
<ul>
<li>Resolves: gh#179 show date of marriage for a family</li>
</ul>
<h2 id="72"><a class="header" href="#72">7.2</a></h2>
<ul>
<li>Better support for GenoPro-generated GED files (Andreas Hrubak)</li>
<li>Keep aspect ratio of images in the PDF output with long names (humaita)</li>
<li>New --relpath option to use relative paths when referring to images</li>
<li>Specify the font used for text explicitly to improve centering</li>
<li>Better handling of death-only dates</li>
<li>Add --birthformat option</li>
<li>Switch to svg placeholders</li>
<li>Add icon for marriage</li>
</ul>
<h2 id="71"><a class="header" href="#71">7.1</a></h2>
<ul>
<li>Rewritten ged2dot to use BFS for graph traversal (much more robust, though some incompatible old
options are now ignored)</li>
<li>Resolves: gh#19 fix infinite recursive stack in Individual.<strong>str</strong> and Family.<strong>str</strong></li>
<li>Resolves: gh#13 marrying cousins is now handled</li>
<li>Comes with a qged2dot GUI (packaged as DMG for macOS, MSI for Windows)</li>
</ul>
<h2 id="70"><a class="header" href="#70">7.0</a></h2>
<ul>
<li>tested with LibreOffice 7.0</li>
<li>pylint fixes</li>
<li>Use sys.stderr.write instead of print to print errors (Colin Chargy)</li>
<li>add better error handling and error out on lack of rc file (Doug Hughes)</li>
</ul>
<h2 id="60"><a class="header" href="#60">6.0</a></h2>
<ul>
<li>fixed to work with 64-bit LibreOffice</li>
</ul>
<h2 id="08"><a class="header" href="#08">0.8</a></h2>
<ul>
<li>fixed to work with LibreOffice 6.1</li>
</ul>
<h2 id="07"><a class="header" href="#07">0.7</a></h2>
<ul>
<li>minor fixes, tested with LibreOffice 5.4</li>
</ul>
<h2 id="06"><a class="header" href="#06">0.6</a></h2>
<ul>
<li>two layout fixes, tested with LibreOffice 5.1</li>
</ul>
<h2 id="05"><a class="header" href="#05">0.5</a></h2>
<ul>
<li>pylint fixes, tested with LibreOffice 4.4</li>
</ul>
<h2 id="04"><a class="header" href="#04">0.4</a></h2>
<ul>
<li>
<p>New 'layout = Descendants' configuration key to show descendants, not ancestors of the root family.</p>
</li>
<li>
<p>Next to &quot;M&quot; and &quot;F&quot;, &quot;U&quot; is now accepted as a sex.</p>
</li>
<li>
<p>Ancestors layout now handles if the root family has children.</p>
</li>
<li>
<p>Mac instructions.</p>
</li>
</ul>
<h2 id="03"><a class="header" href="#03">0.3</a></h2>
<ul>
<li>Handle UTF-8 BOM at the beginning of .ged files</li>
<li>Fixed layout crash on missing previous parent</li>
</ul>
<h2 id="02"><a class="header" href="#02">0.2</a></h2>
<ul>
<li>Initial LibreOffice extension</li>
</ul>
<h2 id="01"><a class="header" href="#01">0.1</a></h2>
<ul>
<li>Initial release</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contributors"><a class="header" href="#contributors">Contributors</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="matomo.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
